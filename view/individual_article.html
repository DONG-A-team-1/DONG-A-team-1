<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>NewsPalette - ê°œì¸ê¸°ì‚¬</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<style>
    :root {
          --primary: #3b82f6;
          --surface: #ffffff;
          --text: #1f2937;
          --muted: #6b7280;
          --border: #e5e7eb;
          --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
          --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
          --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
          --container: 1280px;
          --gray-100: #f3f4f6;
          --gray-700: #374151;
          --gray-800: #1f2937;
      }

      body.dark {
          --surface: #1f2937;
          --text: #f3f4f6;
          --muted: #9ca3af;
          --border: #374151;
      }
.article_content p {
    text-indent: 1em;
    margin-bottom: 1em;  
    line-height: 1.7;
    word-break: keep-all;
}


/* Search Bar */
.search-section {
    margin-top:20px;
    margin-bottom: 30px;
 }

        .search-bar {
            max-width: 896px;
            margin: 0 auto;
            padding: 8px;
            border-radius: 16px;
            border: 1px solid var(--border);
            background: var(--surface);
            box-shadow: var(--shadow-sm);
            display: flex;
            flex-direction: column;
            gap: 8px;
            overflow: hidden;
        }

        /* âœ… ë‹¤í¬ëª¨ë“œ search-bar */
        body.dark .search-bar {
            background: var(--surface);
            border-color: var(--border);
        }

        @media (min-width: 640px) {
            .search-bar { flex-direction: row; align-items: center; }
        }

        .select-wrap {
            position: relative;
            width: 100%;
        }
        @media (min-width: 640px) {
            .select-wrap { width: auto; }
        }

        .select {
            appearance: none;
            width: 100%;
            padding: 12px 36px 12px 16px;
            border: 0;
            border-radius: 10px;
            background: color-mix(in oklab, var(--text) 6%, transparent);
            color: color-mix(in oklab, var(--text) 88%, transparent);
            font-weight: 600;
            font-size: 13px;
            cursor: pointer;
            outline: none;
        }
        @media (min-width: 640px) {
            .select { width: 128px; }
        }

        .select-caret {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 18px;
            color: var(--muted);
            pointer-events: none;
        }

        .search-input-wrap {
            position: relative;
            width: 100%;
            flex: 1;
            background: transparent;  /* âœ… ì¶”ê°€ */
            overflow: hidden;  /* âœ… ë…¸ì´ì¦ˆ ë°©ì§€ */
            border-radius: 10px;  /* âœ… ì¶”ê°€ */
            transform: translateZ(0);  /* âœ… GPU ê°€ì† */
        }

        .search-input {
            caret-color:#000000;
            width: 100%;
            padding: 12px 44px 12px 16px !important;  /* âœ… !important ê°•ì œë¡œ ë„£ëŠ” ê²ƒ*/
            border-radius: 10px;
            border: 1px solid color-mix(in oklab, var(--text) 12%, transparent);
            background: var(--surface) !important;  /* âœ… !important ì¶”ê°€ */
            color: var(--text);
            outline: none !important;  /* âœ… !important ì¶”ê°€ */
            transition: box-shadow .15s, border-color .15s;
            box-sizing: border-box;  /* âœ… ì¶”ê°€ */
            -webkit-appearance: none;  /* âœ… ì¶”ê°€ */
            appearance: none;  /* âœ… ì¶”ê°€ */
            backface-visibility: hidden;  /* âœ… ì¶”ê°€ */
            transform: translateZ(0);  /* âœ… GPU ê°€ì† */
        }
        body.dark .search-input{
           caret-color: #ffffff;
        }

        .search-input::placeholder {
            color: color-mix(in oklab, var(--text) 35%, transparent);
        }

        .search-input:focus {
            border-color: transparent;
            background: var(--surface) !important;  /* âœ… !important ì¶”ê°€ */
            box-shadow: 0 0 0 3px color-mix(in oklab, var(--primary) 35%, transparent);
        }

        .search-input:focus-visible,
        .search-input:active {
            background: var(--surface) !important;
            border-color: rgb(158, 158, 158);
            box-shadow: 0 0 0 3px color-mix(in oklab, var(--primary) 35%, transparent);
        }

        /* âœ… select ì—´ë¦´ ë•Œë„ input ë°°ê²½ ìœ ì§€ */
        .select-wrap:focus-within ~ .search-input-wrap .search-input {
            background: var(--surface) !important;
        }

        /* âœ… ë‹¤í¬ëª¨ë“œ ëª…ì‹œ */
        body.dark .search-input,
        body.dark .search-input:focus,
        body.dark .search-input:active,
        body.dark .search-input:focus-visible {
            background: var(--surface) !important;
            color: var(--text);
            border-color: var(--border);
        }

        body.dark .search-input::placeholder {
            color: var(--muted);
        }

        /* âœ… ë¸Œë¼ìš°ì € ìë™ì™„ì„± ë°°ê²½ ì œê±° */
        .search-input:-webkit-autofill,
        .search-input:-webkit-autofill:hover,
        .search-input:-webkit-autofill:focus,
        .search-input:-webkit-autofill:active {
            -webkit-box-shadow: 0 0 0 30px var(--surface) inset !important;
            -webkit-text-fill-color: var(--text) !important;
        }

        /*webkit-autofill : ë¸Œë¼ìš°ì € ìë™ì™„ì„± ìŠ¤íƒ€ì¼ ì œì–´í•˜ëŠ” css ì„ íƒì */
        body.dark .search-input:-webkit-autofill,
        body.dark .search-input:-webkit-autofill:hover,
        body.dark .search-input:-webkit-autofill:focus {
            -webkit-box-shadow: 0 0 0 30px var(--surface) inset !important;
            -webkit-text-fill-color: var(--text) !important;
        }

        .search-btn {
            position: absolute;
            top: 50%;
            right: 10px;
            transform: translateY(-50%) translateZ(0);  /* âœ… GPU ê°€ì† ì¶”ê°€ */
            border: 0;
            background: transparent;
            color: var(--primary);
            cursor: pointer;
            padding: 4px;  /* âœ… í´ë¦­ ì˜ì—­ */
            display: flex;  /* âœ… ì¶”ê°€ */
            align-items: center;  /* âœ… ì¶”ê°€ */
            justify-content: center;  /* âœ… ì¶”ê°€ */
            z-index: 2;  /* âœ… ì¶”ê°€ */
            border-radius: 4px;  /* âœ… ì¶”ê°€ */
        }

        .search-btn .material-symbols-outlined {
            font-size: 26px;
            display: block;  /* âœ… ì¶”ê°€ */
            line-height: 1;  /* âœ… ì¶”ê°€ */
        }

/* Select */
.select-wrap {
  position: relative;
  width: 100%;
}

@media (min-width: 640px) {
  .select-wrap {
    width: auto;
  }
}

.select {
  appearance: none;
  width: 100%;
  padding: 12px 36px 12px 16px;
  border: 0;
  border-radius: 10px;
  background: rgba(0,0,0,0.05);
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
}

body.dark .select {
  background: rgba(255,255,255,0.08);
  color: #E5E7EB;
}

@media (min-width: 640px) {
  .select {
    width: 128px;
  }
}

.select-caret {
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 18px;
  color: var(--text-sub-light);
  pointer-events: none;
}

/* Input */
.search-input-wrap {
  position: relative;
  flex: 1;
}

.search-input {
  width: 100%;
  padding: 12px 44px 12px 16px;
  border-radius: 10px;
  border: 1px solid var(--gray-300);
  outline: none;
}

body.dark .search-input {
  background: var(--surface-dark);
  color: #F9FAFB;
  border-color: var(--gray-700);
}

.search-input:focus {
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(59,130,246,0.2);
}

.search-btn {
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  color: var(--primary);
  cursor: pointer;
}


/* Main Content */
main {
    max-width: 1280px;
    margin: 0 auto;
    padding: 2rem 1rem;
}

.content-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
}

@media (min-width: 1024px) {
    .content-grid {
        grid-template-columns: 3fr 6fr 3fr;
    }
}

/* Sidebar */
.sidebar {
    display: none;
}

@media (min-width: 1024px) {
    .sidebar {
        display: block;
    }
}

.sidebar-sticky {
    position: sticky;
    top: 6rem;
}

.sidebar-section {
    margin-bottom: 1.5rem;
}

.sidebar-title {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid #EF4444;
    font-weight: bold;
    font-size: 1.125rem;
    color: #111827;
}

body.dark .sidebar-title {
    color: white;
}

.sidebar-title.recommend {
    border-bottom-color: #3B82F6;
}

.sidebar-title .material-symbols-outlined {
    color: #EF4444;
}

.sidebar-title.recommend .material-symbols-outlined {
    color: #3B82F6;
}

.sidebar-article {
    display: block;
    text-decoration: none;
    margin-bottom: 1rem;
    padding-top: 1rem;
    border-top: 1px dashed #E5E7EB;
}

body.dark .sidebar-article {
    border-top-color: #374151;
}

.sidebar-article:first-child {
    border-top: none;
    padding-top: 0;
}

.article-tag {
    display: inline-block;
    font-size: 0.75rem;
    font-weight: bold;
    margin-bottom: 0.25rem;
}

.article-tag.critical {
    color: #EF4444;
}

.article-tag.alternative {
    color: #F97316;
}

.article-tag.analysis {
    color: #A855F7;
}

.article-tag.personalized {
    color: #3B82F6;
    background-color: rgba(59, 130, 246, 0.1);
    padding: 0.125rem 0.375rem;
    border-radius: 4px;
}

.article-tag.popular {
    color: #EF4444;
    background-color: rgba(239, 68, 68, 0.1);
    padding: 0.125rem 0.375rem;
    border-radius: 4px;
}

body.dark .article-tag.popular {
    background-color: rgba(239, 68, 68, 0.3);
}

.article-tag.trending {
    color: #F97316;
    background-color: rgba(249, 115, 22, 0.1);
    padding: 0.125rem 0.375rem;
    border-radius: 4px;
}

body.dark .article-tag.trending {
    background-color: rgba(249, 115, 22, 0.3);
}

.article-tag.recommended {
    color: #6B7280;
    background-color: #F3F4F6;
    padding: 0.125rem 0.375rem;
    border-radius: 4px;
}

body.dark .article-tag.recommended {
    background-color: #1E293B;
}

.article-content {
    display: flex;
    gap: 0.75rem;
}

.article-text {
    flex: 1;
}

.article-title {
    font-size: 0.875rem;
    font-weight: 600;
    color: #1F2937;
    line-height: 1.4;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    transition: color 0.3s;
}

body.dark .article-title {
    color: #E5E7EB;
}

.sidebar-article:hover .article-title {
    color: #3B82F6;
}

.article-source {
    font-size: 0.75rem;
    color: #6B7280;
    margin-top: 0.25rem;
}

body.dark .article-source {
    color: #9CA3AF;
}

.article-category {
    font-size: 0.75rem;
    color: #9CA3AF;
    margin-top: 0.25rem;
    display: block;
}

.article-thumb {
    width: 64px;
    height: 64px;
    flex-shrink: 0;
    border-radius: 6px;
    overflow: hidden;
    background-color: #E5E7EB;
}

.article-thumb img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: opacity 0.3s;
}

.sidebar-article:hover .article-thumb img {
    opacity: 0.8;
}

/* Main Article */
.main-article {
    grid-column: 1;
}

@media (min-width: 1024px) {
    .main-article {
        grid-column: 2;
    }
}

.article-header {
    margin-bottom: 2rem;
}

.article-headline {
    font-size: 2rem;
    font-weight: 900;
    color: #111827;
    line-height: 1.2;
    margin-bottom: 1rem;
}

body.dark .article-headline {
    color: white;
}

@media (min-width: 640px) {
    .article-headline {
        font-size: 2.25rem;
    }
}

.article-headline .highlight {
    color: #3B82F6;
}

.article-meta {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding-bottom: 1rem;
    border-bottom: 1px solid #E2E8F0;
}

body.dark .article-meta {
    border-bottom-color: #334155;
}

.author-info {
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.author-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    border: 1px solid #E5E7EB;
}

body.dark .author-avatar {
    border-color: #4B5563;
}

.author-name {
    font-size: 0.875rem;
    font-weight: bold;
    color: #111827;
}

body.dark .author-name {
    color: white;
}

.author-dept {
    font-size: 0.75rem;
    color: #3B82F6;
    font-weight: 500;
}

.article-date {
    font-size: 0.75rem;
    color: #6B7280;
    text-align: right;
}

body.dark .article-date {
    color: #9CA3AF;
}

.article-date .material-symbols-outlined {
    font-size: 14px;
    vertical-align: middle;
    margin-right: 0.25rem;
}

/* Featured Image */
.featured-image {
    margin-bottom: 2rem;
}

.featured-image img {
    width: 100%;
    height: auto;
    border-radius: 12px;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    margin-bottom: 0.5rem;
}

figcaption {
    font-size: 0.75rem;
    color: #6B7280;
    text-align: center;
}

body.dark figcaption {
    color: #9CA3AF;
}

/* Article Body */
.article-body {
    font-size: 1.125rem;
    line-height: 1.75;
    color: #374151;
    margin-bottom: 3rem;
}

body.dark .article-body {
    color: #D1D5DB;
}

.article-body p {
    margin-bottom: 1.5rem;
}

.article-body .drop-cap {
    float: left;
    font-size: 3rem;
    font-weight: bold;
    color: #3B82F6;
    margin-right: 0.75rem;
    margin-top: -0.5rem;
    line-height: 1;
}

.article-body blockquote {
    border-left: 4px solid #3B82F6;
    background-color: #EFF6FF;
    padding: 1.5rem;
    border-radius: 0 8px 8px 0;
    font-style: normal;
    margin: 2rem 0;
}

body.dark .article-body blockquote {
    background-color: rgba(30, 41, 59, 0.5);
}

.article-body blockquote p {
    font-size: 1.125rem;
    font-weight: 500;
    color: #1F2937;
    margin-bottom: 0.5rem;
}

body.dark .article-body blockquote p {
    color: #E5E7EB;
}

.article-body blockquote cite {
    font-size: 0.875rem;
    color: #3B82F6;
    font-weight: bold;
    display: block;
    font-style: normal;
}

/* Related Articles */
.related-section {
    border-top: 2px solid #F3F4F6;
    padding-top: 2rem;
}

body.dark .related-section {
    border-top-color: #1E293B;
}

.section-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 1.5rem;
}

.section-title {
    font-size: 1.25rem;
    font-weight: bold;
    color: #111827;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

body.dark .section-title {
    color: white;
}

.title-bar {
    width: 6px;
    height: 24px;
    background-color: #3B82F6;
    border-radius: 9999px;
}

.related-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1rem;
}

@media (min-width: 640px) {
    .related-grid {
        grid-template-columns: repeat(3, 1fr);
    }
}

.related-card {
    display: block;
    text-decoration: none;
    cursor: pointer;
}

.related-image {
    position: relative;
    overflow: hidden;
    border-radius: 8px;
    aspect-ratio: 4 / 3;
    margin-bottom: 0.75rem;
}

.related-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s;
}

.related-card:hover .related-image img {
    transform: scale(1.05);
}

.related-badge {
    position: absolute;
    top: 0.5rem;
    left: 0.5rem;
    background-color: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(4px);
    color: white;
    font-size: 0.625rem;
    padding: 0.125rem 0.5rem;
    border-radius: 4px;
}

.related-title {
    font-size: 0.875rem;
    font-weight: bold;
    color: #111827;
    line-height: 1.4;
    margin-bottom: 0.25rem;
    transition: color 0.3s;
}

body.dark .related-title {
    color: #F3F4F6;
}

.related-card:hover .related-title {
    color: #3B82F6;
}

.related-date {
    font-size: 0.75rem;
    color: #6B7280;
}

body.dark .related-date {
    color: #9CA3AF;
}

/* Modal */
.modal {
    position: fixed;
    inset: 0;
    z-index: 100;
    display: none;
}

.modal.show {
    display: block;
}

.modal-backdrop {
    position: fixed;
    inset: 0;
    background-color: rgba(17, 24, 39, 0.6);
    backdrop-filter: blur(4px);
}

.modal-container {
    position: fixed;
    inset: 0;
    z-index: 10;
    width: 100vw;
    overflow-y: auto;
    display: flex;
    min-height: 100%;
    align-items: center;
    justify-content: center;
    padding: 1rem;
    text-align: center;
}

.modal-content {
    position: relative;
    transform: scale(1);
    overflow: hidden;
    border-radius: 16px;
    background-color: white;
    text-align: left;
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
    width: 100%;
    max-width: 384px;
    border: 1px solid #E2E8F0;
}

body.dark .modal-content {
    background-color: #1E293B;
    border-color: #334155;
}

.modal-close {
    position: absolute;
    right: 1rem;
    top: 1rem;
    color: #9CA3AF;
    background: none;
    border: none;
    cursor: pointer;
    transition: color 0.3s;
}

body.dark .modal-close {
    color: #6B7280;
}

.modal-close:hover {
    color: #6B7280;
}

body.dark .modal-close:hover {
    color: #D1D5DB;
}

.modal-body {
    padding: 2rem 1.5rem;
    text-align: center;
}

.modal-icon {
    margin: 0 auto;
    display: flex;
    height: 56px;
    width: 56px;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    background-color: #EFF6FF;
    margin-bottom: 1.25rem;
}

body.dark .modal-icon {
    background-color: rgba(59, 130, 246, 0.3);
}

.modal-icon .material-symbols-outlined {
    font-size: 1.875rem;
    color: #3B82F6;
}

.modal-title {
    font-size: 1.125rem;
    font-weight: bold;
    line-height: 1.5;
    color: #111827;
    margin-bottom: 0.5rem;
}

body.dark .modal-title {
    color: white;
}

.modal-description {
    font-size: 0.875rem;
    color: #6B7280;
    margin-bottom: 2rem;
    line-height: 1.5;
}

body.dark .modal-description {
    color: #9CA3AF;
}

.modal-actions {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.btn {
    width: 100%;
    border-radius: 12px;
    padding: 0.75rem 0.875rem;
    font-size: 0.875rem;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s;
    border: none;
}

.btn-primary {
    background-color: #3B82F6;
    color: white;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
}

.btn-primary:hover {
    background-color: #2563EB;
}

.btn-secondary {
    background-color: white;
    color: #111827;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
    border: 1px solid #E5E7EB;
}

body.dark .btn-secondary {
    background-color: #334155;
    color: white;
    border-color: #4B5563;
}

.btn-secondary:hover {
    background-color: #F9FAFB;
}

body.dark .btn-secondary:hover {
    background-color: #475569;
}

.hidden {
    display: none;
}

/* === Header Action (New Design) === */
.icon-button {
    padding: 0.5rem;
    border-radius: 50%;
    background: none;
    border: none;
    color: #6B7280;
    cursor: pointer;
    transition: background-color 0.2s;
}

body.dark .icon-button {
    color: #9CA3AF;
}

.icon-button:hover {
    background-color: #F3F4F6;
}

body.dark .icon-button:hover {
    background-color: #334155;
}

.user-menu {
    position: relative;
}

.user-menu-button {
    position: relative;
    padding: 0.5rem;
    background: none;
    border: none;
    cursor: pointer;
}

.user-menu-blob {
    position: absolute;
    inset: 0;
    background-color: #E5E7EB;
    opacity: 0;
    transition: opacity 0.2s;
    border-radius: 50%;
}

body.dark .user-menu-blob {
    background-color: #1F2937;
}



.user-dropdown {
    display: none;
    position: absolute;
    right: 0;
    margin-top: 0.5rem;
    width: 12rem;
    background-color: white;
    border-radius: 8px;
    box-shadow: 0 10px 15px rgba(0,0,0,0.1);
    overflow: hidden;
    z-index: 50;
}

body.dark .user-dropdown {
    background-color: #1F2937;
}

.user-dropdown.show {
    display: block;
}

.user-dropdown a {
    display: block;
    padding: 0.75rem 1rem;
    font-size: 0.875rem;
    color: #374151;
    text-decoration: none;
}

body.dark .user-dropdown a {
    color: #E5E7EB;
}

.user-dropdown a:hover {
    background-color: #F3F4F6;
}

body.dark .user-dropdown a:hover {
    background-color: #334155;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Noto Sans KR', sans-serif;
    background-color: var(--bg-light);
    color: var(--text-main-light);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    transition: background-color 0.2s, color 0.2s;
}

body.dark {
    background-color: var(--bg-dark);
    color: var(--text-main-dark);
}

/* Navigation */
nav {
    position: sticky;
    top: 0;
    z-index: 50;
    background-color: #FFFFFF;
    border-bottom: 1px solid #E5E7EB;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

body.dark nav {
    background-color: #1F2937;
    border-bottom-color: #374151;
}

.nav-container {
    max-width: 1280px;
    margin: 0 auto;
    padding: 0 1rem;
}

.nav-content {
    display: flex;
    align-items: center;
    height: 64px;
}

/* ì™¼ìª½ ë¡œê³  */
.nav-left {
    flex: 0 0 auto;
}

/* ê°€ìš´ë° ì¹´í…Œê³ ë¦¬ */
.nav-center {
    flex: 1;
    justify-content: center;
}

/* ì˜¤ë¥¸ìª½ ì•„ì´ì½˜ */
.header-actions {
    flex: 0 0 auto;
}


.logo {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    text-decoration: none;
    cursor: pointer;
}

.logo-icon {
    color: #3B82F6;
    font-size: 1.875rem;
}

.logo-text {
    font-weight: 700;
    font-size: 1.25rem;
    color: #3B82F6;
    letter-spacing: -0.025em;
}

.nav-center {
    position: static;        /* absolute ì œê±° */
    display: flex;
    align-items: center;
    gap: 8px;
}


@media (min-width: 768px) {
    .nav-center {
        display: flex;
        align-items: center;
        gap: 0.25rem;
    }
}

.nav-splash-item {
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    white-space: nowrap;
    padding: 0.5rem 1.25rem;
    margin: 0 0.25rem;
    font-weight: 500;
    transition: all 0.3s ease;
    z-index: 10;
    color: #4B5563;
    text-decoration: none;
}

body.dark .nav-splash-item {
    color: #D1D5DB;
}

.nav-splash-item::before {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    width: 160%;
    height: 160%;
    transform: translate(-50%, -50%) scale(0.6);
    background-color: var(--splash-color);
    mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M44.7,-76.4C58.9,-69.2,71.8,-59.1,81.6,-46.6C91.4,-34.1,98.2,-19.2,95.8,-5.2C93.4,8.9,81.8,22,70.8,32.8C59.8,43.6,49.4,52,38.2,58.8C27,65.6,15,70.8,1.4,68.4C-12.2,66,-26.8,55.9,-39.7,46.7C-52.6,37.5,-63.9,29.1,-71.3,17.8C-78.7,6.5,-82.3,-7.8,-78.4,-20.9C-74.5,-34,-63.1,-46,-50.7,-53.8C-38.3,-61.6,-24.8,-65.2,-11.3,-67.2C2.2,-69.2,15.7,-69.6,30.5,-83.6L44.7,-76.4Z' transform='translate(100 100)' /%3E%3C/svg%3E");
    mask-repeat: no-repeat;
    mask-position: center;
    mask-size: contain;
    opacity: 0;
    z-index: -1;
    transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.nav-splash-item:hover {
    color: var(--splash-text-color, var(--splash-color));
}

.nav-splash-item:hover::before {
    opacity: 0.2;
    transform: translate(-50%, -50%) scale(1.05) rotate(10deg);
}

.nav-splash-item.active {
    color: var(--splash-text-color, var(--splash-color));
}

.nav-splash-item.active::before {
    opacity: 0.35;
    transform: translate(-50%, -50%) scale(1.15);
}

.splash-society { --splash-color: #93C5FD; --splash-text-color: #1D4ED8; }
.splash-politics { --splash-color: #FCA5A5; --splash-text-color: #B91C1C; }
.splash-world { --splash-color: #6EE7B7; --splash-text-color: #047857; }
.splash-international { --splash-color: #FCD34D; --splash-text-color: #B45309; }
.splash-universe { --splash-color: #C4B5FD; --splash-text-color: #6D28D9; }
.splash-sports { --splash-color: #3ece1a; --splash-text-color: #28d562; }

.nav-right {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.icon-btn {
    padding: 0.5rem;
    border-radius: 9999px;
    color: #6B7280;
    background: none;
    border: none;
    cursor: pointer;
    transition: background-color 0.2s;
}

.icon-btn:hover {
    background-color: #F3F4F6;
}

body.dark .icon-btn {
    color: #9CA3AF;
}

body.dark .icon-btn:hover {
    background-color: #374151;
}

.dropdown {
    position: relative;
}

.dropdown-menu {
    display: none;
    position: absolute;
    right: 0;
    margin-top: 0.5rem;
    width: 14rem;
    background-color: #FFFFFF;
    border-radius: 0.75rem;
    box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1);
    padding: 0.5rem 0;
    border: 1px solid #E5E7EB;
    z-index: 50;
}

body.dark .dropdown-menu {
    background-color: #1F2937;
    border-color: #374151;
}

.dropdown-menu.show {
    display: block;
}

.dropdown-header {
    padding: 0.75rem 1rem;
    border-bottom: 1px solid #F3F4F6;
    margin-bottom: 0.25rem;
}

body.dark .dropdown-header {
    border-bottom-color: #374151;
}

.dropdown-subtitle {
    font-size: 0.75rem;
    color: #6B7280;
}

body.dark .dropdown-subtitle {
    color: #9CA3AF;
}

.dropdown-title {
    font-size: 0.875rem;
    font-weight: 700;
    color: #111827;
    margin-top: 0.125rem;
}

body.dark .dropdown-title {
    color: #FFFFFF;
}

.dropdown-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.625rem 1rem;
    font-size: 0.875rem;
    color: #374151;
    text-decoration: none;
    transition: background-color 0.2s;
    background: none;
    border: none;
    width: 100%;
    text-align: left;
    cursor: pointer;
}

body.dark .dropdown-item {
    color: #E5E7EB;
}

.dropdown-item:hover {
    background-color: #F9FAFB;
}

body.dark .dropdown-item:hover {
    background-color: rgba(55, 65, 81, 0.5);
}

.dropdown-item .material-symbols-outlined {
    font-size: 1.25rem;
    color: #9CA3AF;
    transition: color 0.2s;
}

body.dark .dropdown-item .material-symbols-outlined {
    color: #6B7280;
}

.dropdown-item:hover .material-symbols-outlined {
    color: #3B82F6;
}

.dropdown-item.logout:hover {
    color: #EF4444;
}

.dropdown-item.logout:hover .material-symbols-outlined {
    color: #EF4444;
}


/* Header Actions (MyPage + Dark Mode) */
.header-actions {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.icon-button {
    padding: 0.5rem;
    border-radius: 50%;
    background: none;
    border: none;
    color: var(--text-sub-light);
    cursor: pointer;
}

body.dark .icon-button {
    color: var(--text-sub-dark);
}

.icon-button:hover {
    background-color: var(--gray-100);
}

body.dark .icon-button:hover {
    background-color: var(--gray-700);
}

/* User Menu */
.user-menu {
    position: relative;
}

.user-menu-button {
    position: relative;
    padding: 0.5rem;
    background: none;
    border: none;
    cursor: pointer;
}

.user-menu-blob {
    position: absolute;
    inset: 0;
    background-color: var(--gray-100);
    opacity: 0;
    transition: opacity 0.2s;
    transform: scale(1.3);
    border-radius: 50%;
}

body.dark .user-menu-blob {
    background-color: var(--gray-800);
}

.user-menu-button:hover .user-menu-blob {
    opacity: 1;
}

.user-menu-icon {
    position: relative;
    z-index: 10;
}

.user-dropdown {
    display: none;
    position: absolute;
    right: 0;
    margin-top: 0.5rem;
    width: 14rem;
    background-color: white;
    border-radius: 0.75rem;
    box-shadow: 0 10px 15px rgba(0,0,0,0.1);
    padding: 0.5rem 0;
}

body.dark .user-dropdown {
    background-color: var(--gray-800);
}

.user-dropdown.show {
    display: block;
}
:root {
    --primary: #3B82F6;
    --bg-light: #F3F4F6;
    --bg-dark: #111827;
    --surface-light: #FFFFFF;
    --surface-dark: #1F2937;
    --text-main-light: #111827;
    --text-main-dark: #F9FAFB;
    --text-sub-light: #6B7280;
    --text-sub-dark: #9CA3AF;
    --gray-100: #f3f4f6;
    --gray-200: #e5e7eb;
    --gray-300: #d1d5db;
    --gray-600: #4b5563;
    --gray-700: #374151;
    --gray-800: #1f2937;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Noto Sans KR', sans-serif;
    background-color: var(--bg-light);
    color: var(--text-main-light);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    transition: background-color 0.2s, color 0.2s;
}

body.dark {
    background-color: var(--bg-dark);
    color: var(--text-main-dark);
}


</style>
</head>
<body>
<nav>
    <div class="nav-container">
        <div class="nav-content">
            <div class="nav-left">
                <a class="logo" href="home.html">
                    <span class="material-symbols-outlined logo-icon">palette</span>
                    <span class="logo-text">NewsPalette</span>
                </a>
            </div>
            <div class="nav-center">
                <a class="nav-splash-item splash-society" href="category.html?cat=ì‚¬íšŒ">ì‚¬íšŒ</a>
                <a class="nav-splash-item splash-politics" href="category.html?cat=ì •ì¹˜">ì •ì¹˜</a>
                <a class="nav-splash-item splash-world" href="category.html?cat=êµ­ì œ">êµ­ì œ</a>
                <a class="nav-splash-item splash-international" href="category.html?cat=ì§€ì—­">ì§€ì—­</a>
                <a class="nav-splash-item splash-universe" href="category.html?cat=ë¬¸í™”">ë¬¸í™”</a>
                <a class="nav-splash-item splash-sports" href="category.html?cat=ìŠ¤í¬ì¸ ">ìŠ¤í¬ì¸ </a>
            </div>
     <div class="header-actions">
    <button class="icon-button" onclick="toggleDarkMode()">
        <span class="material-symbols-outlined">dark_mode</span>
    </button>

    <div class="user-menu">
        <button class="user-menu-button" onclick="toggleUserMenu()">
            <div class="user-menu-blob"></div>
            <span class="material-symbols-outlined user-menu-icon">account_circle</span>
        </button>

        <div class="user-dropdown" id="userDropdown">
            <div id="dropdownContent"></div>
        </div>
    </div>
</div>

</nav>
<section class="search-section">
  <div class="search-bar">
    <div class="select-wrap">
      <select class="select" id="searchScope" onchange="updateSearchPlaceholder(this)">
        <option value="title_body" selected="">ì œëª©+ë³¸ë¬¸</option>
        <option value="title">ì œëª©</option>
        <option value="body">ë³¸ë¬¸</option>
        <option value="keyword">í‚¤ì›Œë“œ</option>
      </select>
      <span class="material-symbols-outlined select-caret">expand_more</span>
    </div>

    <div class="search-input-wrap">
      <input id="searchInput" class="search-input" type="text" spellcheck="false" placeholder="ê´€ì‹¬ìˆëŠ” ë‰´ìŠ¤ ê¸°ì‚¬ë¥¼ ê²€ìƒ‰í•´ë³´ì„¸ìš”" onkeypress="if(event.key === 'Enter') performSearch()">
      <button class="search-btn" onclick="performSearch()" aria-label="ê²€ìƒ‰">
        <span class="material-symbols-outlined">search</span>
      </button>
    </div>
  </div>
</section>
<main>
    <div class="content-grid">
        <!-- Left Sidebar -->
        <aside class="sidebar polar">
            <div class="sidebar-sticky">
                <div class="sidebar-section">
                    <h3 class="sidebar-title">
                        <span class="material-symbols-outlined">trending_down</span>
                        ë°˜ëŒ€ ì„±í–¥ ê¸°ì‚¬
                    </h3>

                    <a class="sidebar-article polar" href="article-detail.html">
                        <span class="article-tag critical">ë‹¤ë¥¸ ê´€ì </span>
                        <div class="article-content">
                            <div class="article-text">
                                <h4 class="article-title">AI ê·œì œ, í˜ì‹ ì˜ ê±¸ë¦¼ëŒì¸ê°€ í•„ìˆ˜ ì•ˆì „ì¥ì¹˜ì¸ê°€?</h4>
                                <p class="article-source">ë””ì§€í„¸ íƒ€ì„ìŠ¤</p>
                            </div>
                            <div class="article-thumb">
                                <img alt="AI Robot" src="https://lh3.googleusercontent.com/aida-public/AB6AXuClEFKUHwWAoi1RzHlaT0PDkZhh4gN0Hx_4vzjUQt3FqW_8LYS5CpO5HIWCWEDOqeZbUAayheBIxBFwUYb_5bM87mfj_MPjmwz76CImdwphzCfogE4fpbJZF2t_bEqWk1nocuLm7BX5OI0GgmjTgdN-Rdz64vp3P8Q1sBy_RV9HkueL_XGLm7bGcodsMUg2ceWTEDo5GJPf681dh7VJmoe7CoBKx80u5Vm7jqf7uAcXm_TK_KCtNABbmQkmpbB-wrDuUHuEkhNCR18"/>
                            </div>
                        </div>
                    </a>

                    <a class="sidebar-article polar" href="article-detail.html">
                        <span class="article-tag alternative">ë‹¤ë¥¸ ê´€ì </span>
                        <div class="article-content">
                            <div class="article-text">
                                <h4 class="article-title">ì¼ìë¦¬ ê°ì†Œ ìš°ë ¤, ê³¼ì¥ëœ ê³µí¬ì¼ ë¿... ìƒˆë¡œìš´ ì§ì—… ì°½ì¶œ íš¨ê³¼ ì£¼ëª©</h4>
                                <p class="article-source">ê²½ì œ í¬ì»¤ìŠ¤</p>
                            </div>
                            <div class="article-thumb">
                                <img alt="Chart" src="https://lh3.googleusercontent.com/aida-public/AB6AXuAJsvQTQ_DfnOxTi26q-UmNIPhVxd1pJPxDzaDx7KGWMWSjTRFvL7srQNZ5x9fCSPTQIxfqX2BSHVCWiNkbayuPRj3aM9ew6H_z5Aqx0q8mPR3tOg-CgWgiHh5mEGeMyl99qTGsBNTCxK2rWstLChGHfmADwKgzUfMy_NwJjuccDVdQgU28vchGUl_23Iv1B042Vf2wL-ie0rBOjtDOKZMAWTJI6k4xfvNJbkAxxvExkI03-PI2m1xgSWrgC9HkIlUCcqfQBROPGX8"/>
                            </div>
                        </div>
                    </a>

                    <a class="sidebar-article polar" href="article-detail.html">
                        <span class="article-tag analysis">ë¶„ì„</span>
                        <div class="article-content">
                            <div class="article-text">
                                <h4 class="article-title">ì „í†µ ì‚°ì—…ì˜ ë°˜ê²©, AIë§Œì´ ë‹µì€ ì•„ë‹ˆë‹¤. ì¸ê°„ ì¤‘ì‹¬ ê°€ì¹˜ ì¬ì¡°ëª…</h4>
                                <p class="article-source">ìœ„í´ë¦¬ ë¹„ì¦ˆ</p>
                            </div>
                            <div class="article-thumb">
                                <img alt="Factory" src="https://lh3.googleusercontent.com/aida-public/AB6AXuDGcS_zl_pyK-XS6Prexvtol0sPgnIA-3aIVD7jOkmUCKvffshXUIJo8imq5QRpu1dlt5ha4fsuyMnxbyFP_RKWgWLt_avqsBlOgDpAz1GwMCl9hzCYVYlmkTQioCKpo3-jj65ZSgtvGF65mVJo4FPhtMperfOvIK1a-g_kX8Al-8BAkdEcLBUpnAK6Jo8FR9agwILanMf0wQMzVqVdzpKA-iXNzYPXz_c_t4zDuVoxeknYAxihieJSVpzWp5OPe5rcUyRqRbbER-U"/>
                            </div>
                        </div>
                    </a>
                </div>
            </div>
        </aside>

        <!-- Main Article -->
        <article class="main-article">

                <h1 class="article-headline">

                </h1>

                <div class="article-meta">
                    <div class="author-info">
                        <img alt="Reporter" class="author-avatar" src="https://lh3.googleusercontent.com/aida-public/AB6AXuDJ8GYuMvp-aam5rlP3yYMzUF4q7vLFUgpCoRKqYlwN13R7J-xypwQsN3tQ5ibFazlofmj4Ifr_NXWav-mxlDaowgB5fYRSq75j9YPoGkDZeIKyKJ8t8-PQ8FvG-9EUTAOpGDcvca9y4BOIgkdp57nffjRYgdNwu-NCAIM3hBToyuV4ChLucp9ewUkKJVYkVlSox36nv_IfaeSf6HtuZb76EZVzQ_iJV_xeBOWh1wnTbLVBIPePWl0DNuzEhRxhkIIF9Gp3Nc9bBEk"/>
                        <div>
                            <div class="author-name"></div>
                            <div class="press"></div>
                        </div>
                    </div>

                    <div class="upload_date">
                        <span class="material-symbols-outlined">schedule</span>2023. 11. 14. 14:59
                    </div>
                </div>
            </header>

            <figure class="featured-image">
                <img class="main_img">
                <figcaption>
                    <!-- ì…”í„°ìŠ¤í†¡(Shutterstock) ì œê³µ | ì¸ê³µì§€ëŠ¥ ê¸°ìˆ ì´ ì „ ì‚°ì—… ë¶„ì•¼ë¡œ í™•ì‚°ë˜ë©° ìƒˆë¡œìš´ ê²½ì œ íŒ¨ëŸ¬ë‹¤ì„ì„ ì˜ˆê³ í•˜ê³  ìˆë‹¤. -->
                </figcaption>
            </figure>

            <div class="article_content">
                <!-- <p>
                    <span class="drop-cap">ì¸</span>
                    ê³µì§€ëŠ¥(AI) ê¸°ìˆ ì˜ ê¸‰ê²©í•œ ë°œì „ì´ ê¸€ë¡œë²Œ ê²½ì œì˜ íŒë„ë¥¼ ë’¤í”ë“¤ê³  ìˆë‹¤. ë‹¨ìˆœí•œ ê¸°ìˆ ì  ì§„ë³´ë¥¼ ë„˜ì–´, ì œì¡°ì—…ë¶€í„° ì„œë¹„ìŠ¤ì—…ê¹Œì§€ ì‚°ì—… ì „ë°˜ì˜ êµ¬ì¡°ì  ë³€í™”ë¥¼ ì´‰ë°œí•˜ê³  ìˆëŠ” ê²ƒì´ë‹¤. ì´ëŠ” ìš°ë¦¬ê°€ ì§€ê¸ˆê¹Œì§€ ê²½í—˜í•˜ì§€ ëª»í•œ ìƒˆë¡œìš´ ì°¨ì›ì˜ ì‚°ì—… í˜ëª…ì´ë‹¤. íŠ¹íˆ ìƒì„±í˜• AIì˜ ë“±ì¥ì€ ìƒì‚°ì„± í˜ì‹ ì„ ê°€ì†í™”í•˜ë©° ê¸°ì—…ë“¤ì—ê²Œ ìƒˆë¡œìš´ ê¸°íšŒì™€ ë„ì „ì„ ë™ì‹œì— ì•ˆê²¨ì£¼ê³  ìˆë‹¤.
                </p>

                <p>
                    ì§€ë‚œ ìˆ˜ì‹­ ë…„ê°„ ì •ë³´í™” í˜ëª…ì´ ì¸í„°ë„·ì„ ì¤‘ì‹¬ìœ¼ë¡œ ì´ë£¨ì–´ì¡Œë‹¤ë©´, ì´ë²ˆ AI í˜ëª…ì€ 'ì§€ëŠ¥í™”'ë¥¼ í•µì‹¬ìœ¼ë¡œ í•œë‹¤. ë°ì´í„° ë¶„ì„ì„ ë„˜ì–´ ìŠ¤ìŠ¤ë¡œ ì½˜í…ì¸ ë¥¼ ìƒì„±í•˜ê³ , ë³µì¡í•œ ì˜ì‚¬ê²°ì •ì„ ì§€ì›í•˜ë©°, ì¸ê°„ì˜ ì°½ì˜ì„± ì˜ì—­ê¹Œì§€ ë„˜ë³´ê³  ìˆë‹¤.
                </p>

                <blockquote>
                    <p>
                        "ì§€ê¸ˆì€ AIë¼ëŠ” ê±°ëŒ€í•œ íŒŒë„ì— ì˜¬ë¼íƒˆ ì¤€ë¹„ë¥¼ í•´ì•¼ í•  ë•Œì…ë‹ˆë‹¤. ë‹¨ìˆœí•œ ê¸°ìˆ ì„ ë„ì…í•˜ëŠ” ê²ƒì„ ë„˜ì–´, ì¡°ì§ ë¬¸í™”ì™€ ì¼í•˜ëŠ” ë°©ì‹ ìì²´ë¥¼ ê·¼ë³¸ì ìœ¼ë¡œ í˜ì‹ í•´ì•¼ ìƒì¡´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."
                    </p>
                    <cite>- í™ìˆ˜í˜• ê²½ì œì—°êµ¬ì†Œ ìˆ˜ì„ì—°êµ¬ì›</cite>
                </blockquote> -->

                <!-- <p>
                    í–¥í›„ 5ë…„ì´ ê³¨ë“ íƒ€ì„ì´ ë  ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤. ì´ ê¸°ê°„ ë™ì•ˆ ê¸°ì—…ë“¤ì´ ì–´ë–»ê²Œ ì²´ì§ˆ ê°œì„ ì„ ì´ë£¨ì–´ë‚´ëŠëƒì— ë”°ë¼ ê¸€ë¡œë²Œ ì‹œì¥ì—ì„œì˜ ì˜í–¥ë ¥ì´ ê²°ì •ë  ê²ƒì´ë‹¤. ë‰´ìŠ¤íŒ”ë ˆíŠ¸ëŠ” ì•ìœ¼ë¡œë„ ì´ ê±°ëŒ€í•œ ë³€í™”ì˜ íë¦„ì„ ì§€ì†ì ìœ¼ë¡œ ì¶”ì í•˜ê³  ë¶„ì„í•  ì˜ˆì •ì´ë‹¤.
                </p> -->
            </div>

            <section class="related-section">
                <div class="section-header">
                    <h3 class="section-title">
                        <span class="title-bar"></span>
                        ì´ ê¸°ì‚¬ì™€ ì—°ê´€ëœ ë‰´ìŠ¤
                    </h3>
                </div>

                <div class="related-grid">
                    <a class="related-card" href="article-detail.html">
                        <div class="related-image">
                            <img alt="Meeting"/>
                            <span class="related-badge">ì‚¬íšŒ</span>
                        </div>
                        <h4 class="related-title">ìœ í†µì— ë„ì… ëŠ¥ë ¥ ê³µê°œ ì°¨... ì¸ì²œ ì¼ê´„ ëª…ë ¹</h4>
                        <span class="related-date">2023.11.13</span>
                    </a>

                    <a class="related-card" href="article-detail.html">
                        <div class="related-image">
                            <img alt="Office Plant" src="https://lh3.googleusercontent.com/aida-public/AB6AXuAGhOAQiATb9MVPwOcSMunpaakj2hwYzrxHU5DMhikdzS0xwpjlIr6nviHPtn7zspy_7RSSXMe8SFpKup1Aqb2qyBlBl-SCSYeKwdYMOTjwAeikVFCJnVPnXdsEK40xp1mG3DR11WqhMQ6HPJzOOQys8bsH6W1ah13J6E5GG-6At0R_V1xOqbo_XZMKKMSIa-G18RnVuqIdrAQy_75iOKVOjcmJRzuvOZelbbIRJa4kjNe608NjtGan2e_rRk__UdeWPukPCSzAhhw"/>
                            <span class="related-badge">ê¸°ìˆ /ê³¼í•™</span>
                        </div>
                        <h4 class="related-title">ê°œë°œì ì—†ëŠ” ê°œë°œ ì‹œëŒ€, ë…¸ì½”ë“œ(No-Code) ì—´í’</h4>
                        <span class="related-date">2023.11.13</span>
                    </a>

                    <a class="related-card" href="article-detail.html">
                        <div class="related-image">
                            <img alt="Fashion" src="https://lh3.googleusercontent.com/aida-public/AB6AXuDvWBjc1BBXGwhaWq9bj1Ubp53AVdwo7_BZeiNTcrPVxiyRxIqWM42lxZd8H_qU1CvV1do6jwjtOXSac5Uvyu-QY_VQyE0AxdNi3wgLzWn4fZi8xmyQsSZziskkXld52oT6xHZ-gqMKJguzPdu9MV-9t21uta3p46Bp1lI-AKMEZNgYNuhmIwb3KmUzjmciBOyOfHUaWZLiCfsGNmuIcP7UpsSl9LIwju3lKK2264EzgRA3aJX5hj0cDh7IWaRIVcSj1RufWKbAUuU"/>
                            <span class="related-badge">ê²½ì œ</span>
                        </div>
                        <h4 class="related-title">ë¹…ë°ì´í„°ë¡œ ë³¸ 2024ë…„ ê²½ì œ ì „ë§ ë¦¬í¬íŠ¸</h4>
                        <span class="related-date">2023.11.10</span>
                    </a>
                </div>
            </section>
        </article>

        <!-- Right Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-sticky">   <!-- â­ ì´ê²Œ í•µì‹¬ -->
                <div class="sidebar-section">
                    <h3 class="sidebar-title recommend">
                        <span class="material-symbols-outlined">auto_awesome</span>
                        ê°œì¸í™” ì¶”ì²œ ê¸°ì‚¬
                    </h3>

                    <div class="sidebar-personalized-list" id="sidebarPersonalizedList">
                        <p style="text-align:center; color:#999; padding:1rem;">
                            ì¶”ì²œ ê¸°ì‚¬ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...
                        </p>
                    </div>
                </div>
            </div>
        </aside>

    </div>
</main>
<script>
    // ========== í™ˆ í™”ë©´ ê²€ìƒ‰ í•¨ìˆ˜ ==========
function performSearch() {
    const term = document.getElementById('searchInput').value.trim();
    const scope = document.getElementById('searchScope').value;
    if (term) {
        location.href = `search.html?q=${encodeURIComponent(term)}&scope=${encodeURIComponent(scope)}`;
    }
}




/*
@ ìœ ì € í–‰ë™ ë¡œê·¸ â€“ ê¸°ì‚¬ ìƒì„¸ í˜ì´ì§€ ì„¸ì…˜ ê´€ë¦¬]
ê¸°ì‚¬ í˜ì´ì§€ 1íšŒ ì²´ë¥˜ = session 1ê°œ
ìƒˆë¡œê³ ì¹¨ / BFCache / JS ì¬ì‹¤í–‰í•´ë„ session ì¤‘ë³µ ìƒì„± ë°©ì§€
ping / ì¢…ë£Œ ì‹ í˜¸ë¥¼ ì•ˆì •ì ìœ¼ë¡œ ì„œë²„ì— ì „ë‹¬

@ í•µì‹¬
- sessionStorageë¥¼ ì´ìš©í•´ "í˜„ì¬ íƒ­ì˜ ì„¸ì…˜"ì„ ë‹¨ í•˜ë‚˜ë§Œ ìœ ì§€ / ESì—ëŠ” ì‹¤ì‹œê°„ ê¸°ë¡ / RDB ì €ì¥ì€ batchì—ì„œ ë‹¨ 1íšŒë§Œ
*/



/* ===============================
   âœ… ARTICLE SESSION TRACKING (FINAL)
   - userId ëŒ€ê¸°
   - ì„¸ì…˜ ì¤‘ë³µ ìƒì„± ë°©ì§€
   - ping / end ì•ˆì • ì²˜ë¦¬
================================ */

const params = new URLSearchParams(window.location.search);
const articleId = params.get("article_id");

function getUserId() {
  return localStorage.getItem("user_id");
}

if (!articleId) {
  console.warn("[SESSION] articleId missing â†’ tracking disabled");
}

/* === sessionStorage key (íƒ­ ë‹¨ìœ„) === */
const SESSION_KEY = "article_session_id";
let sessionId = sessionStorage.getItem(SESSION_KEY);
let pingTimer = null;
let ended = false;


/* === scroll depth === */
function getScrollDepth() {
  const scrollTop = window.scrollY || document.documentElement.scrollTop;
  const windowHeight = window.innerHeight;
  const documentHeight = document.documentElement.scrollHeight;
  return Math.min(1, Math.max(0, (scrollTop + windowHeight) / documentHeight));
}


/* === session start (1íšŒë§Œ) === */
async function startSessionOnce() {
  const userId = getUserId();
  if (!userId || !articleId || sessionId) return;

  console.log("[SESSION] start");

  const res = await fetch("/session/start", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      user_id: userId,
      article_id: articleId
    })
  });

  const data = await res.json();
  sessionId = data.session_id;
  sessionStorage.setItem(SESSION_KEY, sessionId);

  startPing(); // ì„¸ì…˜ ìƒì„± í›„ì—ë§Œ ping
}

/* === ping === */
function startPing() {
  if (pingTimer) return;

  pingTimer = setInterval(() => {
    if (!sessionId) return;

    fetch("/session/ping", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        session_id: sessionId,
        scroll_depth: getScrollDepth()
      })
    });
  }, 10_000);
}
/* === session end === */
function endSessionOnce() {
  if (!sessionId || ended) return;
  ended = true;

  console.log("[SESSION] end");

  navigator.sendBeacon(
    `/session/end?session_id=${sessionId}`
  );

  sessionStorage.removeItem(SESSION_KEY);
  if (pingTimer) clearInterval(pingTimer);
}


/* === visibility / page exit === */
document.addEventListener("visibilitychange", () => {
  if (document.visibilityState === "hidden") {
    endSessionOnce();
  }
});
window.addEventListener("pagehide", endSessionOnce);

/* === userId ìƒê¸¸ ë•Œê¹Œì§€ ëŒ€ê¸° === */
const waitForUser = setInterval(() => {
  if (getUserId()) {
    clearInterval(waitForUser);
    startSessionOnce();
  }
}, 100);

/* ===============================
   ğŸ”¥ ë‹¤í¬ëª¨ë“œ (ë¡œì»¬ìŠ¤í† ë¦¬ì§€)
================================ */
function toggleDarkMode() {
    document.body.classList.toggle('dark');
    localStorage.setItem(
        'darkMode',
        document.body.classList.contains('dark')
    );
}

// ì´ˆê¸° ë‹¤í¬ëª¨ë“œ
if (
    localStorage.getItem('darkMode') === 'true' ||
    (
        !localStorage.getItem('darkMode') &&
        window.matchMedia('(prefers-color-scheme: dark)').matches
    )
) {
    document.body.classList.add('dark');
}

/* ===============================
   ğŸ”¥ ìœ ì € ë©”ë‰´
================================ */
function toggleUserMenu() {
    document.getElementById('userDropdown').classList.toggle('show');
}

// ë°”ê¹¥ í´ë¦­ ì‹œ ë‹«ê¸°
document.addEventListener('click', (e) => {
    const menu = document.querySelector('.user-menu');
    const dropdown = document.getElementById('userDropdown');
    if (menu && !menu.contains(e.target)) {
        dropdown.classList.remove('show');
    }
});

/* ===============================
   ğŸ”¥ ë¡œê·¸ì¸ ìƒíƒœ ì²˜ë¦¬
================================ */
$(document).ready(function() {
    // 1. í˜ì´ì§€ ë¡œë“œ ì‹œ ì¦‰ì‹œ ì‹¤í–‰ í•¨ìˆ˜ ( ì¦‰ì‹œì‹¤í–‰ í•  ê²ƒ ìˆìœ¼ë©´ ì¶”ê°€ê°€ëŠ¥ )
    initApp();
});

function initApp() {
    // ë¡œê·¸ì¸ ì—¬ë¶€ í™•ì¸
    const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
    const savedName = localStorage.getItem('userName') || "íšŒì›";

    // 2. ì„œë²„ ì‘ë‹µ ì „ì´ë¼ë„ ë¡œì»¬ ë°ì´í„°ë¥¼ ì´ìš©í•´ UI ë¨¼ì € ë Œë”ë§
    renderUserMenu(isLoggedIn, savedName);

    if (isLoggedIn) {
        // 3. ì„œë²„ì—ì„œ ìµœì‹  ì •ë³´ ê°€ì ¸ì™€ ë™ê¸°í™”
        fetchUserInfo();
    }
}

function fetchUserInfo() {
    $.ajax({
        url: '/get-my-info',
        type: 'GET',
        success: function(response) {
            if (response.status === "success" && response.data) {
                const user = response.data;

                // ë¸Œë¼ìš°ì € ì €ì¥ì†Œ ê°±ì‹ 
                localStorage.setItem('userName', user.name);
                localStorage.setItem('isLoggedIn', 'true');
                localStorage.setItem('userId', user.user_id);
                console.log(user.user_id);
                console.log(user);
                // UI ì—…ë°ì´íŠ¸ (ë“œë¡­ë‹¤ìš´ & ì‚¬ì´ë“œë°”)
                renderUserMenu(true, user.name);
            }
        },
        error: function(xhr) {
            console.error("ì¸ì¦ ë¡œë“œ ì‹¤íŒ¨:", xhr.status);
            if(xhr.status === 401) {
                localStorage.setItem('isLoggedIn', 'false');
                renderUserMenu(false);
            }
        }
    });
}

// ë“œë¡­ë‹¤ìš´ ë¶€ë¶„
function renderUserMenu(isLoggedIn, userName = "íšŒì›") {

    const content = document.getElementById('dropdownContent');
    if (!content) return;

    if (isLoggedIn) {
        content.innerHTML = `
            <div class="dropdown-header">
                <p class="dropdown-subtitle">í™˜ì˜í•©ë‹ˆë‹¤!</p>
                <p class="dropdown-title" style="font-weight:bold; color:var(--text-main); margin-top:4px;">${userName}ë‹˜</p>
            </div>
            <a href="mypage.html" class="dropdown-item">
                <span class="material-symbols-outlined">account_circle</span>
                <span>ë§ˆì´í˜ì´ì§€</span>
            </a>
            <button onclick="logout()" class="dropdown-item logout" style="width:100%; border:none; background:none; cursor:pointer; text-align:left; display:flex; align-items:center; gap:8px; padding: 12px 16px; color: #ef4444;">
                <span class="material-symbols-outlined">logout</span>
                <span>ë¡œê·¸ì•„ì›ƒ</span>
            </button>
        `;
    } else {
        content.innerHTML = `
            <div class="dropdown-header">
                <p class="dropdown-subtitle">ë” ë§ì€ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë ¤ë©´</p>
                <p class="dropdown-title" style="font-weight:bold; margin-top:4px;">ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤</p>
            </div>
            <a href="login.html" class="dropdown-item">
                <span class="material-symbols-outlined">login</span>
                <span>ë¡œê·¸ì¸</span>
            </a>
            <a href="logregist.html" class="dropdown-item">
                <span class="material-symbols-outlined">person_add</span>
                <span>íšŒì›ê°€ì…</span>
            </a>
        `;
    }
}

function logout() {
    if (!confirm("ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) return;
    $.ajax({
        url: '/logout',
        type: 'GET',
        success: function() {
            localStorage.clear();
            alert("ë¡œê·¸ì•„ì›ƒ ë˜ì—ˆìŠµë‹ˆë‹¤.");
            location.href = 'home.html';
        },
        error: function() {
            localStorage.clear();
            location.reload();
        }
    });
}

/* ===============================
   ğŸ”¥ ê²€ìƒ‰ ë“œë¡­ë‹¤ìš´
================================ */
// function toggleSearchDropdown() {
//     document.getElementById('search-dropdown-menu').classList.toggle('show');
// }

// function updateSearchContext(label, placeholder) {
//     document.getElementById('search-dropdown-label').innerText = label;
//     document.getElementById('search-input-field').placeholder = placeholder;
//     document.getElementById('search-dropdown-menu').classList.remove('show');
// }

// function performSearch() {
//     const input = document.getElementById('search-input-field');
//     if (input.value.trim()) {
//         location.href = `searchresult.html?q=${encodeURIComponent(input.value.trim())}`;
//     }
// }

/* ===============================
   ğŸ”¥ ì¹´í…Œê³ ë¦¬ active ê³ ì •
================================ */
function setActiveCategoryByURL() {
    const navItems = document.querySelectorAll('.nav-splash-item');
    const currentPage = location.pathname.split('/').pop();

    navItems.forEach(item => {
        item.classList.toggle(
            'active',
            item.getAttribute('href') === currentPage
        );
    });
}

/* ===============================
   ğŸ”¥ ì´ˆê¸° ì‹¤í–‰
================================ */
document.addEventListener('DOMContentLoaded', () => {
    // toggleLoginState();
    setActiveCategoryByURL();

    const searchInput = document.getElementById('search-input-field');
    if (searchInput) {
        searchInput.addEventListener('keypress', e => {
            if (e.key === 'Enter') performSearch();
        });
    }
});

$(function () {
  // 1ï¸âƒ£ URLì—ì„œ article_id ì¶”ì¶œ
  const params = new URLSearchParams(window.location.search);
  const articleId = params.get("article_id");

  // 2ï¸âƒ£ AJAX ìš”ì²­ (GET)
  const DEFAULT_IMG = "/static/newspalette.png";

  $.ajax({
    url: `/api/article/${articleId}`,
    method: "GET",
    dataType: "json",

    success: function (data) {

      /* =========================
         ğŸ”¹ ë©”ì¸ ê¸°ì‚¬ ë Œë”ë§
      ========================= */
      const main_article = data.article || {};

      $(".article-headline").text(main_article.article_title || "");
      $(".author-name").text(main_article.reporter || "");
      $(".press").text(main_article.press || "");
      $(".upload_date").text(main_article.upload_date || "");

      // ë©”ì¸ ì´ë¯¸ì§€
      if (main_article.article_img) {
        $(".featured-image").show();
        $(".main_img")
          .attr("src", main_article.article_img)
          .attr("alt", main_article.article_title || "ê¸°ì‚¬ ì´ë¯¸ì§€")
          .on("error", function () {
            $(this).attr("src", DEFAULT_IMG);
          });
      } else {
        $(".featured-image").hide();
      }

      /* =========================
         ğŸ”¹ ë³¸ë¬¸ ì²˜ë¦¬ (ì´ë¯¸ì§€/ìº¡ì…˜ ì œê±°)
      ========================= */
      const cleanedBody = (main_article.article_content || "")
        .replace(/<figure[\s\S]*?<\/figure>/gi, "")
        .replace(/<img[^>]*>/gi, "")
        .replace(/South Korean prosecutor.*$/gmi, "");

      $(".article_content").html(
        renderParagraphs(cleanedBody, 2)
      );

      /* =========================
         ğŸ”¹ Related ê¸°ì‚¬ ë Œë”ë§
      ========================= */
      const related = data.related || [];
      const $cards = $(".related-card");

      related.forEach((item, idx) => {
        const $card = $cards.eq(idx);
        if ($card.length === 0) return;

        $card.attr("href", `/article/${item.article_id}`);
        $card.find(".related-title").text(item.article_title || "");
        $card.find(".related-date").text(item.upload_date || "");
        $card.find(".related-badge").text(item.category || "");

        $card.find(".related-image img")
          .attr("src", item.article_img || DEFAULT_IMG)
          .on("error", function () {
            $(this).attr("src", DEFAULT_IMG);
          });
      });

      /* =========================
         ğŸ”¹ Polar ê¸°ì‚¬ íŒŒì‹±
      ========================= */
      const polarObj =
        (data.polar && Array.isArray(data.polar.articles)) ? data.polar :
        (data.polar && data.polar.polar && Array.isArray(data.polar.polar.articles)) ? data.polar.polar :
        {};

      const polarArticles = Array.isArray(polarObj.articles)
        ? polarObj.articles
        : [];

      const $polarzone = $(".sidebar.polar");
      const $polarCards = $(".sidebar-article.polar");

      if (polarArticles.length === 0) {
        $polarzone.hide();
        return;
      }

      $polarzone.show();
      $polarzone.find(".sidebar-title").text(polarObj.topic_name || "");

      polarArticles.forEach((item, idx) => {
        const $card = $polarCards.eq(idx);
        if ($card.length === 0) return;

        $card.attr("href", `/article/${item.article_id}`);
        $card.find(".article-title").text(item.article_title || "");
        $card.find(".article-source").text(item.press || "");
        $card.find(".article-thumb img")
          .attr("src", item.article_img || DEFAULT_IMG)
          .on("error", function () {
            $(this).attr("src", DEFAULT_IMG);
          });
      });

      // ë‚¨ëŠ” polar ì¹´ë“œ ìˆ¨ê¹€
      $polarCards.each(function (i) {
        if (i >= polarArticles.length) $(this).hide();
        else $(this).show();
      });
    },

    error: function (xhr) {
      console.error("ê¸°ì‚¬ ë¡œë“œ ì‹¤íŒ¨", xhr.status, xhr.responseText);
    }
  });
});




function renderParagraphs(text, sentencePerPara = 2) {
    if (!text) return "";

    const sentences = text
        .split(/(?<=[.?!])\s+/)   // í•œê¸€ ë¬¸ì¥ ê³ ë ¤
        .filter(s => s.trim().length > 0);

    let html = "";
    for (let i = 0; i < sentences.length; i += sentencePerPara) {
        // ë¬¸ì¥ ì‚¬ì´ í•œ ì¹¸ ë„ì–´ì“°ê¸°
        const chunk = sentences.slice(i, i + sentencePerPara).join(" ");
        html += `<p>${chunk}</p>`;
    }
    return html;
}

function loadPersonalizedArticlesForSidebar() {
    const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
    const userId = localStorage.getItem('user_id') || "guest";

    // í˜„ì¬ ê¸°ì‚¬ ID (individual í˜ì´ì§€ ì „ìš©)
    const params = new URLSearchParams(window.location.search);
    const currentArticleId = params.get("article_id");

    $.get("/recommend", {
        user_id: userId,
        limit: 5
    }, function(res) {

        if (!res || !res.recommendations) {
            console.warn("ì¶”ì²œ ê²°ê³¼ ì—†ìŒ", res);
            return;
        }

        const box = document.getElementById("sidebarPersonalizedList");
        if (!box) return;
        box.innerHTML = "";

        // ğŸ”¥ í˜„ì¬ ê¸°ì‚¬ ì œì™¸ (Option A)
        const filtered = res.recommendations
            .filter(item => item.article_id !== currentArticleId)
            .slice(0, 4);

        if (filtered.length === 0) {
            box.innerHTML = `<p style="text-align:center; color:#999;">ì¶”ì²œ ê¸°ì‚¬ê°€ ì—†ìŠµë‹ˆë‹¤</p>`;
            return;
        }

        filtered.forEach(item => {
            const el = document.createElement("a");
            el.href = `/article/${item.article_id}`;
            el.className = "sidebar-article";

            el.innerHTML = `
                <span class="article-tag personalized">íšŒì›ë‹˜ ì·¨í–¥ì €ê²©</span>
                <div class="article-content">
                    <div class="article-thumb">
                        <img src="${item.article_img || '/static/newspalette.png'}" alt="ê¸°ì‚¬ ì´ë¯¸ì§€">
                    </div>
                    <div class="article-text">
                        <h4 class="article-title clamp-2">${item.title}</h4>
                        <span class="article-category">ì¶”ì²œì ìˆ˜ ${item.final_score}ì </span>
                    </div>
                </div>
            `;

            box.appendChild(el);
        });
    });
}

$(document).ready(function () {
    loadPersonalizedArticlesForSidebar();
});

/* ===============================
   ğŸ”¥ ë§í¬ í´ë¦­ ì‹œ ì„¸ì…˜ ì¢…ë£Œ ë³´ì¥
================================ */
  /* ===============================
     ğŸ”¥ ë§í¬ ì´ë™ ì‹œ ì„¸ì…˜ ì¢…ë£Œ ë³´ì¥ (ìµœì¢…)
  ================================ */
  document.addEventListener("click", (e) => {
  const a = e.target.closest("a");
  if (!a) return;

  const href = a.getAttribute("href");
  const target = a.getAttribute("target");

  if (
    !href ||
    href.startsWith("#") ||
    href.startsWith("javascript") ||
    target === "_blank"
  ) return;

  if (typeof endSessionOnce === "function") {
    e.preventDefault();
    endSessionOnce();
    setTimeout(() => {
      window.location.href = href;
    }, 120);
  }
});

</script>

</body>
</html>


