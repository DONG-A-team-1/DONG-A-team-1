<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>NewsPalette -ì •ì¹˜ ë‰´ìŠ¤</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Icons+Round" rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<style>
:root {
    --primary: #3B82F6;
    --bg-light: #F3F4F6;
    --bg-dark: #111827;
    --surface-light: #FFFFFF;
    --surface-dark: #1F2937;
    --text-main-light: #111827;
    --text-main-dark: #F9FAFB;
    --text-sub-light: #6B7280;
    --text-sub-dark: #9CA3AF;
    --gray-100: #f3f4f6;
    --gray-200: #e5e7eb;
    --gray-300: #d1d5db;
    --gray-600: #4b5563;
    --gray-700: #374151;
    --gray-800: #1f2937;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Noto Sans KR', sans-serif;
    background-color: var(--bg-light);
    color: var(--text-main-light);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    transition: background-color 0.2s, color 0.2s;
}

body.dark {
    background-color: var(--bg-dark);
    color: var(--text-main-dark);
}

/* Navigation */
nav {
    position: sticky;
    top: 0;
    z-index: 50;
    background-color: #FFFFFF;
    border-bottom: 1px solid #E5E7EB;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

body.dark nav {
    background-color: #1F2937;
    border-bottom-color: #374151;
}

.nav-container {
    max-width: 1280px;
    margin: 0 auto;
    padding: 0 1rem;
}

.nav-content {
    display: flex;
    align-items: center;
    height: 64px;
}

/* ì™¼ìª½ ë¡œê³  */
.nav-left {
    flex: 0 0 auto;
}

/* ê°€ìš´ë° ì¹´í…Œê³ ë¦¬ */
.nav-center {
    flex: 1;
    justify-content: center;
}

/* ì˜¤ë¥¸ìª½ ì•„ì´ì½˜ */
.header-actions {
    flex: 0 0 auto;
}


.logo {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    text-decoration: none;
    cursor: pointer;
}

.logo-icon {
    color: #3B82F6;
    font-size: 1.875rem;
}

.logo-text {
    font-weight: 700;
    font-size: 1.25rem;
    color: #3B82F6;
    letter-spacing: -0.025em;
}

.nav-center {
    position: static;        /* absolute ì œê±° */
    display: flex;
    align-items: center;
    gap: 8px;
}


@media (min-width: 768px) {
    .nav-center {
        display: flex;
        align-items: center;
        gap: 0.25rem;
    }
}

.nav-splash-item {
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    white-space: nowrap;
    padding: 0.5rem 1.25rem;
    margin: 0 0.25rem;
    font-weight: 500;
    transition: all 0.3s ease;
    z-index: 10;
    color: #4B5563;
    text-decoration: none;
}

body.dark .nav-splash-item {
    color: #D1D5DB;
}

.nav-splash-item::before {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    width: 160%;
    height: 160%;
    transform: translate(-50%, -50%) scale(0.6);
    background-color: var(--splash-color);
    mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M44.7,-76.4C58.9,-69.2,71.8,-59.1,81.6,-46.6C91.4,-34.1,98.2,-19.2,95.8,-5.2C93.4,8.9,81.8,22,70.8,32.8C59.8,43.6,49.4,52,38.2,58.8C27,65.6,15,70.8,1.4,68.4C-12.2,66,-26.8,55.9,-39.7,46.7C-52.6,37.5,-63.9,29.1,-71.3,17.8C-78.7,6.5,-82.3,-7.8,-78.4,-20.9C-74.5,-34,-63.1,-46,-50.7,-53.8C-38.3,-61.6,-24.8,-65.2,-11.3,-67.2C2.2,-69.2,15.7,-69.6,30.5,-83.6L44.7,-76.4Z' transform='translate(100 100)' /%3E%3C/svg%3E");
    mask-repeat: no-repeat;
    mask-position: center;
    mask-size: contain;
    opacity: 0;
    z-index: -1;
    transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.nav-splash-item:hover {
    color: var(--splash-text-color, var(--splash-color));
}

.nav-splash-item:hover::before {
    opacity: 0.2;
    transform: translate(-50%, -50%) scale(1.05) rotate(10deg);
}

.nav-splash-item.active {
    color: var(--splash-text-color, var(--splash-color));
}

.nav-splash-item.active::before {
    opacity: 0.35;
    transform: translate(-50%, -50%) scale(1.15);
}

.splash-society { --splash-color: #93C5FD; --splash-text-color: #1D4ED8; }
.splash-politics { --splash-color: #FCA5A5; --splash-text-color: #B91C1C; }
.splash-world { --splash-color: #6EE7B7; --splash-text-color: #047857; }
.splash-international { --splash-color: #FCD34D; --splash-text-color: #B45309; }
.splash-universe { --splash-color: #C4B5FD; --splash-text-color: #6D28D9; }
.splash-sports { --splash-color: #3ece1a; --splash-text-color: #28d562; }

/* Dropdown */
.dropdown {
    position: relative;
}

.dropdown-menu {
    display: none;
    position: absolute;
    right: 0;
    margin-top: 0.5rem;
    width: 14rem;
    background-color: #FFFFFF;
    border-radius: 0.75rem;
    box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1);
    padding: 0.5rem 0;
    border: 1px solid #E5E7EB;
    z-index: 50;
}

body.dark .dropdown-menu {
    background-color: #1F2937;
    border-color: #374151;
}

.dropdown-menu.show {
    display: block;
}

.dropdown-header {
    padding: 0.75rem 1rem;
    border-bottom: 1px solid #F3F4F6;
    margin-bottom: 0.25rem;
}

body.dark .dropdown-header {
    border-bottom-color: #374151;
}

.dropdown-subtitle {
    font-size: 0.75rem;
    color: #6B7280;
}

body.dark .dropdown-subtitle {
    color: #9CA3AF;
}

.dropdown-title {
    font-size: 0.875rem;
    font-weight: 700;
    color: #111827;
    margin-top: 0.125rem;
}

body.dark .dropdown-title {
    color: #FFFFFF;
}

.dropdown-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.625rem 1rem;
    font-size: 0.875rem;
    color: #374151;
    text-decoration: none;
    transition: background-color 0.2s;
    background: none;
    border: none;
    width: 100%;
    text-align: left;
    cursor: pointer;
}

body.dark .dropdown-item {
    color: #E5E7EB;
}

.dropdown-item:hover {
    background-color: #F9FAFB;
}

body.dark .dropdown-item:hover {
    background-color: rgba(55, 65, 81, 0.5);
}

.dropdown-item .material-symbols-outlined {
    font-size: 1.25rem;
    color: #9CA3AF;
    transition: color 0.2s;
}

body.dark .dropdown-item .material-symbols-outlined {
    color: #6B7280;
}

.dropdown-item:hover .material-symbols-outlined {
    color: #3B82F6;
}

.dropdown-item.logout:hover {
    color: #EF4444;
}

.dropdown-item.logout:hover .material-symbols-outlined {
    color: #EF4444;
}

/* Header Actions */
.header-actions {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.icon-button {
    padding: 0.5rem;
    border-radius: 50%;
    background: none;
    border: none;
    color: var(--text-sub-light);
    cursor: pointer;
}

body.dark .icon-button {
    color: var(--text-sub-dark);
}

.icon-button:hover {
    background-color: var(--gray-100);
}

body.dark .icon-button:hover {
    background-color: var(--gray-700);
}

.user-menu {
    position: relative;
}

.user-menu-button {
    position: relative;
    padding: 0.5rem;
    background: none;
    border: none;
    cursor: pointer;
}

.user-menu-blob {
    position: absolute;
    inset: 0;
    background-color: var(--gray-100);
    opacity: 0;
    transition: opacity 0.2s;
    transform: scale(1.3);
    border-radius: 50%;
}

body.dark .user-menu-blob {
    background-color: var(--gray-800);
}

.user-menu-button:hover .user-menu-blob {
    opacity: 1;
}

.user-menu-icon {
    position: relative;
    z-index: 10;
}

.user-dropdown {
    display: none;
    position: absolute;
    right: 0;
    margin-top: 0.5rem;
    width: 14rem;
    background-color: white;
    border-radius: 0.75rem;
    box-shadow: 0 10px 15px rgba(0,0,0,0.1);
    padding: 0.5rem 0;
}

body.dark .user-dropdown {
    background-color: var(--gray-800);
}

.user-dropdown.show {
    display: block;
}

/* Main Content */
main {
    max-width: 1280px;
    margin: 0 auto;
    padding: 2rem 1rem;
}

/* Search Section */
.search-section {
  margin-bottom: 3rem;
}

.search-bar {
  max-width: 48rem;
  margin: 0 auto;
  padding: 8px;
  border-radius: 16px;
  border: 1px solid var(--gray-200);
  background: var(--surface-light);
  box-shadow: 0 1px 2px rgba(0,0,0,0.05);
  display: flex;
  flex-direction: column;
  gap: 8px;
}

body.dark .search-bar {
  background: var(--surface-dark);
  border-color: var(--gray-700);
}

@media (min-width: 640px) {
  .search-bar {
    flex-direction: row;
    align-items: center;
  }
}

.select-wrap {
  position: relative;
  width: 100%;
}

@media (min-width: 640px) {
  .select-wrap {
    width: auto;
  }
}

.select {
  appearance: none;
  width: 100%;
  padding: 12px 36px 12px 16px;
  border: 0;
  border-radius: 10px;
  background: rgba(0,0,0,0.05);
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
}

body.dark .select {
  background: rgba(255,255,255,0.08);
  color: #E5E7EB;
}

@media (min-width: 640px) {
  .select {
    width: 128px;
  }
}

.select-caret {
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 18px;
  color: var(--text-sub-light);
  pointer-events: none;
}

.search-input-wrap {
  position: relative;
  flex: 1;
}

.search-input {
  width: 100%;
  padding: 12px 44px 12px 16px;
  border-radius: 10px;
  border: 1px solid var(--gray-300);
  outline: none;
}

body.dark .search-input {
  background: var(--surface-dark);
  color: #F9FAFB;
  border-color: var(--gray-700);
}

.search-input:focus {
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(59,130,246,0.2);
}

.search-btn {
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  color: var(--primary);
  cursor: pointer;
}

/* Section Headers */
.section-header {
    border-bottom: 1px solid #E5E7EB;
    padding-bottom: 1rem;
    margin-bottom: 1.5rem;
}

body.dark .section-header {
    border-bottom-color: #374151;
}

.section-title {
    font-size: 1.875rem;
    font-weight: 700;
    color: #111827;
}

body.dark .section-title {
    color: #FFFFFF;
}

.section-subtitle {
    margin-top: 0.5rem;
    font-size: 0.875rem;
    color: #6B7280;
}

body.dark .section-subtitle {
    color: #9CA3AF;
}

/* Article Grid */
.article-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1.5rem;
    margin-bottom: 3rem;
}

@media (min-width: 768px) {
    .article-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (min-width: 1024px) {
    .article-grid {
        grid-template-columns: repeat(4, 1fr);
    }
}

.article-card {
    background-color: #FFFFFF;
    border-radius: 0.75rem;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    overflow: hidden;
    border: 1px solid #E5E7EB;
    transition: box-shadow 0.2s;
    text-decoration: none;
    display: flex;
    flex-direction: column;
    height: 100%;
}

body.dark .article-card {
    background-color: #1F2937;
    border-color: #374151;
}

.article-card:hover {
    box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
}

.article-image {
    position: relative;
    height: 12rem;
    width: 100%;
    overflow: hidden;
}

.article-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s;
}

.article-card:hover .article-image img {
    transform: scale(1.05);
}

.article-tag {
    position: absolute;
    top: 0.75rem;
    left: 0.75rem;
    background-color: #7C3AED;
    color: #FFFFFF;
    font-size: 0.75rem;
    padding: 0.25rem 0.5rem;
    border-radius: 0.25rem;
    font-weight: 600;
}

.article-content {
    padding: 1rem;
    display: flex;
    flex-direction: column;
    flex-grow: 1;
}

.article-title {
    font-size: 1.125rem;
    font-weight: 700;
    color: #111827;
    margin-bottom: 0.5rem;
    line-height: 1.4;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    transition: color 0.2s;
}

body.dark .article-title {
    color: #FFFFFF;
}

.article-card:hover .article-title {
      color: #111827;
}

.article-description {
    font-size: 0.875rem;
    color: #4B5563;
    margin-bottom: 1rem;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
    flex-grow: 1;
}

body.dark .article-description {
    color: #9CA3AF;
}

.article-meta {
    font-size: 0.75rem;
    color: #6B7280;
    margin-top: auto;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.5rem;
    flex-wrap: wrap;
}

body.dark .article-meta {
    color: #6B7280;
}

.article-source {
    display: flex;
    align-items: center;
    gap: 0.25rem;
}

/* Reliability Badge */
.reliability-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    padding: 0.25rem 0.5rem;
    border-radius: 0.375rem;
    font-size: 0.75rem;
    font-weight: 600;
    white-space: nowrap;
}

.reliability-high {
    background-color: #D1FAE5;
    color: #065F46;
}

body.dark .reliability-high {
    background-color: rgba(16, 185, 129, 0.2);
    color: #6EE7B7;
}

.reliability-medium {
    background-color: #FEF3C7;
    color: #92400E;
}

body.dark .reliability-medium {
    background-color: rgba(251, 191, 36, 0.2);
    color: #FCD34D;
}

.reliability-low {
    background-color: #FEE2E2;
    color: #991B1B;
}

body.dark .reliability-low {
    background-color: rgba(239, 68, 68, 0.2);
    color: #FCA5A5;
}

.reliability-icon {
    font-size: 0.875rem;
}

/* List Section */
.list-section {
    margin-top: 3rem;
}

.list-header {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    border-bottom: 1px solid #E5E7EB;
    padding-bottom: 1rem;
    margin-bottom: 1.5rem;
}

@media (min-width: 640px) {
    .list-header {
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
    }
}

body.dark .list-header {
    border-bottom-color: #374151;
}

.list-title-row {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.list-title {
    font-size: 1.25rem;
    font-weight: 700;
    color: #1F2937;
}

body.dark .list-title {
    color: #E5E7EB;
}

.sort-buttons {
    display: flex;
    gap: 0.25rem;
    background-color: #F3F4F6;
    padding: 0.25rem;
    border-radius: 0.5rem;
}

body.dark .sort-buttons {
    background-color: #1F2937;
}

.sort-btn {
    padding: 0.375rem 1rem;
    font-size: 0.875rem;
    font-weight: 500;
    border-radius: 0.375rem;
    border: none;
    cursor: pointer;
    transition: all 0.2s;
    color: #4B5563;
    background: transparent;
}

body.dark .sort-btn {
    color: #9CA3AF;
}

.sort-btn:hover {
    background-color: #E5E7EB;
}

body.dark .sort-btn:hover {
    background-color: #374151;
}

.sort-btn.active {
    background-color: #3B82F6;
    color: #FFFFFF;
    box-shadow: 0 1px 2px rgba(0,0,0,0.05);
}

/* Article List */
.article-list {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.list-article {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    padding: 1rem;
    border-radius: 0.75rem;
    transition: background-color 0.2s;
    text-decoration: none;
    border-bottom: 1px solid #F3F4F6;
}

@media (min-width: 640px) {
    .list-article {
        flex-direction: row;
    }
}

body.dark .list-article {
    border-bottom-color: #1F2937;
}

.list-article:last-child {
    border-bottom: none;
}

.list-article:hover {
    background-color: #F9FAFB;
}

body.dark .list-article:hover {
    background-color: rgba(31, 41, 55, 0.5);
}

.list-article-image {
    width: 100%;
    height: 10rem;
    flex-shrink: 0;
    border-radius: 0.5rem;
    overflow: hidden;
    position: relative;
}

@media (min-width: 640px) {
    .list-article-image {
        width: 16rem;
    }
}

.list-article-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s;
}

.list-article:hover .list-article-image img {
    transform: scale(1.05);
}

.list-article-body {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
}

.list-article-tags {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    font-size: 0.75rem;
    color: #7C3AED;
    margin-bottom: 0.5rem;
}

.list-article-category {
    background-color: #EDE9FE;
    padding: 0.125rem 0.5rem;
    border-radius: 0.25rem;
    color: #7C3AED;
    font-weight: 500;
}

body.dark .list-article-category {
    background-color: rgba(124, 58, 237, 0.3);
}

.list-article-date {
    color: #9CA3AF;
}

body.dark .list-article-date {
    color: #6B7280;
}

.list-article-title {
    font-size: 1.25rem;
    font-weight: 700;
    color: #111827;
    margin-bottom: 0.5rem;
    cursor: pointer;
    transition: color 0.2s;
}

body.dark .list-article-title {
    color: #FFFFFF;
}

.list-article:hover .list-article-title {
     color: #111827;
}

.list-article-desc {
    font-size: 0.875rem;
    color: #4B5563;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    margin-bottom: 0.75rem;
}

body.dark .list-article-desc {
    color: #9CA3AF;
}

.list-article-source {
    font-size: 0.75rem;
    color: #6B7280;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    flex-wrap: wrap;
}

body.dark .list-article-source {
    color: #6B7280;
}

.list-article-source strong {
    color: #374151;
    font-weight: 500;
}

body.dark .list-article-source strong {
    color: #D1D5DB;
}

/* Pagination */
.pagination {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding-top: 2rem;
    border-top: 1px solid #E5E7EB;
    margin-top: 3rem;
}

body.dark .pagination {
    border-top-color: #374151;
}

.pagination-btn {
    width: 2rem;
    height: 2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 0.25rem;
    font-size: 0.875rem;
    font-weight: 500;
    border: none;
    cursor: pointer;
    transition: all 0.2s;
}

.pagination-nav {
    padding: 0.5rem;
    color: #6B7280;
    background: transparent;
    border: none;
    cursor: pointer;
    transition: color 0.2s;
}

body.dark .pagination-nav {
    color: #9CA3AF;
}

.pagination-nav:hover {
    color: #3B82F6;
}

.pagination-btn.page {
    color: #4B5563;
    background: transparent;
}

body.dark .pagination-btn.page {
    color: #D1D5DB;
}

.pagination-btn.page:hover {
    background-color: #F3F4F6;
}

body.dark .pagination-btn.page:hover {
    background-color: #1F2937;
}

.pagination-btn.page.active {
    background-color: #3B82F6;
    color: #FFFFFF;
}

.pagination-btn.page.active:hover {
    background-color: #2563EB;
}

.spacer {
    height: 5rem;
}

.meta-dot {
    margin: 0 4px;
    color: #9CA3AF;
}

    /* =========================
   ğŸŒ™ ë‹¤í¬ëª¨ë“œ ê°€ë…ì„± ê°œì„ 
========================= */

/* ì¹´ë“œ ì „ì²´ ê¸°ë³¸ í…ìŠ¤íŠ¸ */
body.dark .article-card,
body.dark .list-article {
    color: #E5E7EB;
}

/* ì¹´ë“œ ì œëª© */
body.dark .article-title,
body.dark .card-title,
body.dark .list-title-text {
    color: #F9FAFB !important;
}

/* ì¹´ë“œ ë³¸ë¬¸ */
body.dark .article-description,
body.dark .card-description,
body.dark .list-desc {
    color: #D1D5DB !important;
}

/* ë©”íƒ€ ì •ë³´ (ê¸°ì, ì–¸ë¡ ì‚¬, ë‚ ì§œ) */
body.dark .article-meta,
body.dark .card-source,
body.dark .list-article-source {
    color: #9CA3AF;
}
    /* ëª¨ë“  ê¸°ì‚¬ ë§í¬ ìƒ‰ìƒ í†µì œ */
#articleGrid a,
#articleList a {
    color: inherit;
    text-decoration: none;
}

/* hover ì‹œì—ë„ íŒŒë€ìƒ‰ ê¸ˆì§€ */
#articleGrid a:hover,
#articleList a:hover {
    color: inherit;
}
/* ë‹¤í¬ëª¨ë“œ ì´ë¯¸ì§€ ê°€ë…ì„± */
body.dark .article-image img,
body.dark .list-article-image img {
    filter: brightness(1.1) contrast(1.05);
}
</style>
</head>
<body>
<nav>
    <div class="nav-container">
        <div class="nav-content">
            <div class="nav-left">
                <a class="logo" href="homepage.html">
                    <span class="material-symbols-outlined logo-icon">palette</span>
                    <span class="logo-text">NewsPalette</span>
                </a>
            </div>
           <div class="nav-center">
                <a class="nav-splash-item splash-society" href="socialcategory.html">ì‚¬íšŒ/ê²½ì œ</a>
                <a class="nav-splash-item splash-politics" href="politicscategory.html">ì •ì¹˜</a>
                <a class="nav-splash-item splash-world" href="internationalcategory.html">êµ­ì œ</a>
                <a class="nav-splash-item splash-international active" href="localcategorycategory.html">ì§€ì—­</a>
                <a class="nav-splash-item splash-universe" href="culturecategory.html">ë¬¸í™”</a>
                <a class="nav-splash-item splash-sports" href="sportscategory.html">ìŠ¤í¬ì¸ </a>
            </div>
            <div class="header-actions">
                <button class="icon-button" onclick="toggleDarkMode()">
                    <span class="material-symbols-outlined">dark_mode</span>
                </button>
                <div class="user-menu">
                    <button class="user-menu-button" onclick="toggleUserMenu()">
                        <div class="user-menu-blob"></div>
                        <span class="material-symbols-outlined user-menu-icon">account_circle</span>
                    </button>
                    <div class="user-dropdown" id="userDropdown">
                        <div id="dropdownContent"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</nav>

<main>
    <section class="search-section">
        <div class="search-bar">
            <div class="select-wrap">
                <select class="select" id="searchScope" onchange="updateSearchPlaceholder(this)">
                    <option value="title_body" selected>ì œëª©+ë³¸ë¬¸</option>
                    <option value="title">ì œëª©</option>
                    <option value="body">ë³¸ë¬¸</option>
                    <option value="keyword">í‚¤ì›Œë“œ</option>
                </select>
                <span class="material-icons-round select-caret">expand_more</span>
            </div>
            <div class="search-input-wrap">
                <input id="searchInput" class="search-input" type="text" placeholder="ì œëª©+ë³¸ë¬¸ì—ì„œ ê´€ì‹¬ìˆëŠ” ë‰´ìŠ¤ë¥¼ ê²€ìƒ‰í•´ë³´ì„¸ìš”" onkeypress="if(event.key === 'Enter') performSearch()"/>
                <button class="search-btn" onclick="performSearch()" aria-label="ê²€ìƒ‰">
                    <span class="material-icons-round">search</span>
                </button>
            </div>
        </div>
    </section>
<!-- ì¹´ë“œí˜• ê¸°ì‚¬ -->
<section>
    <div class="section-header">
        <h1 class="section-title">ì •ì¹˜</h1>
        <p class="section-subtitle" id="articleCount">ê¸°ì‚¬ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
    </div>

    <div class="article-grid" id="articleGrid">
        <!-- ì¹´ë“œí˜• í…œí”Œë¦¿ (ìˆ¨ê¹€) -->
        <a class="article-card article-card-template" style="display:none;">
            <div class="article-image">
                <img class="card-img" src="" alt="">
            </div>
            <div class="article-content">
                <h3 class="card-title"></h3>
                <p class="card-description"></p>
                <div class="article-meta">
                    <div class="card-source"></div>
                    <span class="reliability-badge">
                        <span class="material-symbols-outlined reliability-icon">verified</span>
                        <span class="card-trust"></span>
                    </span>
                </div>
            </div>
        </a>
    </div>
</section>

<section class="list-section">
    <div class="list-header">
        <div class="list-title-row">
            <span class="material-symbols-outlined" style="font-size: 1.5rem; color: #111827;">account_balance</span>
            <h2 class="list-title">ì •ì¹˜</h2>
        </div>
        <div class="sort-buttons">
            <button class="sort-btn active" id="btnLatest" onclick="sortArticles('latest')">ìµœì‹ ìˆœ</button>
            <button class="sort-btn" id="btnOldest" onclick="sortArticles('oldest')">ê³¼ê±°ìˆœ</button>
            <button class="sort-btn" id="btnReliability" onclick="sortArticles('reliability')">ì‹ ë¢°ë„ìˆœ</button>
        </div>
    </div>

    <div class="article-list" id="articleList">
        <!-- ë¦¬ìŠ¤íŠ¸í˜• í…œí”Œë¦¿ (ìˆ¨ê¹€) -->
        <a class="list-article list-article-template" style="display:none;">
            <div class="list-article-image">
                <img class="list-img" src="" alt=""/>
            </div>
            <div class="list-article-body">
                <div class="list-article-tags">
                    <span class="list-category"></span>
                    <span class="list-date"></span>
                </div>
                <h3 class="list-title-text"></h3>
                <p class="list-desc"></p>
                <div class="list-article-source">
                <span class="list-reporter"></span>
                <span class="meta-dot">Â·</span>
                <strong class="list-source"></strong>

                <span class="reliability-badge">
                    <span class="material-symbols-outlined reliability-icon">verified</span>
                    <span class="list-trust"></span>
                </span>
            </div>

            </div>
        </a>
    </div>
</section>




<div class="pagination">
    <button class="pagination-nav">
        <span class="material-symbols-outlined" style="font-size: 0.875rem;">chevron_left</span>
    </button>
    <button class="pagination-btn page active" onclick="goToPage(1)">1</button>
    <button class="pagination-btn page" onclick="goToPage(2)">2</button>
    <button class="pagination-btn page" onclick="goToPage(3)">3</button>
    <button class="pagination-btn page" onclick="goToPage(4)">4</button>
    <button class="pagination-btn page" onclick="goToPage(5)">5</button>
    <button class="pagination-nav">
        <span class="material-symbols-outlined" style="font-size: 0.875rem;">chevron_right</span>
    </button>
</div>

<div class="spacer"></div>
</main>
<script>
// ========== í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰ ==========
$(document).ready(function() {
    loadCategoryArticles('ì •ì¹˜', 1);  // ë¬¸í™” ì¹´í…Œê³ ë¦¬, 1í˜ì´ì§€
    initializeUI();
});

function initializeUI() {
    toggleLoginState();
    setActiveCategoryByURL();

    const scopeSelect = document.getElementById('searchScope');
    if (scopeSelect) updateSearchPlaceholder(scopeSelect);
}

// ========== ë°±ì—”ë“œì—ì„œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ==========
function loadCategoryArticles(categoryName, page = 1) {
    const itemsPerPage = 9;  // í˜ì´ì§€ë‹¹ 9ê°œ (ì¹´ë“œ 4 + ë¦¬ìŠ¤íŠ¸ 5)

    $.ajax({
        url: `/api/category/${encodeURIComponent(categoryName)}`,
        type: 'GET',
        data: {
            size: itemsPerPage * 5,  // 5í˜ì´ì§€ë¶„ ë°ì´í„° (45ê°œ)
            page: page
        },
        success: function(response) {
            if (response.success) {
                // ì´ ê°œìˆ˜ í‘œì‹œ
                $('#articleCount').text(`ì´ ${response.total}ê±´ì˜ ${categoryName} ê¸°ì‚¬`);

                // í˜„ì¬ í˜ì´ì§€ì— í•´ë‹¹í•˜ëŠ” ë°ì´í„°ë§Œ ì¶”ì¶œ
                const startIdx = (page - 1) * itemsPerPage;
                const endIdx = startIdx + itemsPerPage;
                const pageArticles = response.articles.slice(startIdx, endIdx);

                // ì¹´ë“œí˜• 4ê°œ, ë¦¬ìŠ¤íŠ¸í˜• 5ê°œ
                displayCardArticles(pageArticles.slice(0, 4));
                displayListArticles(pageArticles.slice(4, 9));

                // í˜ì´ì§€ë„¤ì´ì…˜ ì—…ë°ì´íŠ¸
                updatePaginationUI(page);
            }
        },
        error: function(xhr, status, error) {
            console.error('ë¡œë“œ ì‹¤íŒ¨:', error);
            $('#articleCount').text('ê¸°ì‚¬ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        }
    });
}

// ========== ì¹´ë“œí˜• ê¸°ì‚¬ ë Œë”ë§ ==========
function displayCardArticles(articles) {
    const container = $('#articleGrid');
    const template = $('.article-card-template');

    // ê¸°ì¡´ ê¸°ì‚¬ë§Œ ì‚­ì œ (í…œí”Œë¦¿ ìœ ì§€)
    container.find('.article-card:not(.article-card-template)').remove();

    articles.forEach(function(article) {
        const card = template.clone();
        card.removeClass('article-card-template');
        card.css('display', '');
        card.attr('href', `/article/${article.article_id}`);
        card.attr('data-reliability', article.trustScore);

        // ì´ë¯¸ì§€
        const imageUrl = article.image || 'https://via.placeholder.com/400x300?text=No+Image';
        card.find('.card-img').attr('src', imageUrl).attr('alt', article.title);

        // ì œëª©
        card.find('.card-title').text(article.title);

        // ë³¸ë¬¸ (100ì)
        const content = (article.content || '').substring(0, 100) + '...';
        card.find('.card-description').text(content);

        // ì¶œì²˜ & ë‚ ì§œ
        const sourceText = `${article.source} â€¢ ${formatDate(article.upload_date)}`;
        card.find('.card-source').text(sourceText);

        // ì‹ ë¢°ë„
        const trust = Math.floor(article.trustScore / 100);
        card.find('.card-trust').text(`ì‹ ë¢°ë„ ${trust}%`);


        // ì‹ ë¢°ë„ ë°°ì§€ ìƒ‰ìƒ
        const reliabilityClass = getReliabilityClass(article.trustScore);
        card.find('.reliability-badge').addClass(reliabilityClass);

        container.append(card);
    });
}

// ========== ë¦¬ìŠ¤íŠ¸í˜• ê¸°ì‚¬ ë Œë”ë§ ==========
function displayListArticles(articles) {
    const container = $('#articleList');
    const template = $('.list-article-template');

    // ê¸°ì¡´ ê¸°ì‚¬ë§Œ ì‚­ì œ (í…œí”Œë¦¿ ìœ ì§€)
    container.find('.list-article:not(.list-article-template)').remove();

    articles.forEach(function(article) {
        const listItem = template.clone();
        listItem.removeClass('list-article-template');
        listItem.css('display', '');
        listItem.attr('href', `/article/${article.article_id}`);
        listItem.attr('data-date', article.upload_date);
        listItem.attr('data-reliability', article.trustScore);

        // ì´ë¯¸ì§€
        const imageUrl = article.image || 'https://via.placeholder.com/400x300?text=No+Image';
        listItem.find('.list-img').attr('src', imageUrl).attr('alt', article.title);

        // ì¹´í…Œê³ ë¦¬
        // ê¸°ì ì´ë¦„ (ì—†ìœ¼ë©´ ë¹ˆ ê°’ ì²˜ë¦¬)

       listItem.find('.list-reporter').text(article.reporter);

        // ì–¸ë¡ ì‚¬
        listItem.find('.list-source').text(article.press);


        // ë‚ ì§œ
        listItem.find('.list-date').text(formatDateYMD(article.upload_date));

        // ì œëª©
        listItem.find('.list-title-text').text(article.title);

        // ë³¸ë¬¸
        const content = (article.content || '').substring(0, 100) + '...';
        listItem.find('.list-desc').text(content);

        // ì¶œì²˜
        listItem.find('.list-source').text(article.source);

        // ì‹ ë¢°ë„
        const trust = Math.floor(article.trustScore / 100);
        listItem.find('.list-trust').text(`ì‹ ë¢°ë„ ${trust}%`);


        const reliabilityClass = getReliabilityClass(article.trustScore);
        listItem.find('.reliability-badge').addClass(reliabilityClass);

        container.append(listItem);
    });
}

// ========== ì •ë ¬ ê¸°ëŠ¥ (ë¦¬ìŠ¤íŠ¸ë§Œ) ==========
function sortArticles(type) {
    const container = document.getElementById('articleList');
    const template = container.querySelector('.list-article-template');

    // í…œí”Œë¦¿ì„ ì œì™¸í•œ ê¸°ì‚¬ë“¤ë§Œ ê°€ì ¸ì˜¤ê¸°
    const articles = Array.from(
        container.querySelectorAll('.list-article:not(.list-article-template)')
    );

    articles.sort((a, b) => {
        const dateA = new Date(a.dataset.date);
        const dateB = new Date(b.dataset.date);
        const relA = Number(a.dataset.reliability || 0);
        const relB = Number(b.dataset.reliability || 0);

        if (type === 'latest') return dateB - dateA;
        if (type === 'oldest') return dateA - dateB;
        if (type === 'reliability') return relB - relA;
        return 0;
    });

    // í…œí”Œë¦¿ì„ ì œì™¸í•˜ê³  ë‹¤ì‹œ ì¶”ê°€
    container.innerHTML = '';
    container.appendChild(template);  // í…œí”Œë¦¿ ë¨¼ì €
    articles.forEach(a => container.appendChild(a));  // ì •ë ¬ëœ ê¸°ì‚¬ë“¤

    // ë²„íŠ¼ í™œì„±í™”
    document.querySelectorAll('.sort-btn').forEach(btn => btn.classList.remove('active'));
    const btnId = 'btn' + type.charAt(0).toUpperCase() + type.slice(1);
    document.getElementById(btnId).classList.add('active');
}

// ========== í˜ì´ì§€ë„¤ì´ì…˜ ==========
function goToPage(pageNumber) {
    loadCategoryArticles('ì •ì¹˜', pageNumber);  // ë°ì´í„° ë‹¤ì‹œ ë¡œë“œ
    updatePaginationUI(pageNumber);
    window.scrollTo({ top: 0, behavior: 'smooth' });  // ë§¨ ìœ„ë¡œ ìŠ¤í¬ë¡¤
}

function updatePaginationUI(activePage) {
    document.querySelectorAll('.pagination-btn.page').forEach(btn => {
        btn.classList.toggle('active', Number(btn.innerText) === activePage);
    });
}

// ========== ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤ ==========
function getReliabilityClass(score) {
    if (score >= 80) return 'reliability-high';
    if (score >= 60) return 'reliability-medium';
    return 'reliability-low';
}

function formatDate(dateStr) {
    const date = new Date(dateStr);
    const now = new Date();
    const diff = now - date;

    const hours = Math.floor(diff / (1000 * 60 * 60));
    if (hours < 1) return 'ë°©ê¸ˆ ì „';
    if (hours < 24) return `${hours}ì‹œê°„ ì „`;

    const days = Math.floor(hours / 24);
    if (days < 7) return `${days}ì¼ ì „`;

    return date.toLocaleDateString('ko-KR');
}

function formatDateYMD(dateStr) {
    const date = new Date(dateStr);
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, '0');
    const day = String(date.getDate()).padStart(2, '0');
    return `${year}.${month}.${day}`;
}

// ========== ê¸°íƒ€ UI í•¨ìˆ˜ë“¤ ==========
function toggleLoginState() {
    const isLoggedIn = (typeof(Storage) !== "undefined" && localStorage.getItem('isLoggedIn') === 'true');
    const dropdownContent = document.getElementById('dropdownContent');

    if (isLoggedIn) {
        dropdownContent.innerHTML = `
            <div class="dropdown-header">
                <p class="dropdown-subtitle">í™˜ì˜í•©ë‹ˆë‹¤!</p>
                <p class="dropdown-title">í™ê¸¸ë™ë‹˜</p>
            </div>
            <a href="mypage.html" class="dropdown-item">
                <span class="material-symbols-outlined">account_circle</span>
                <span>ë§ˆì´í˜ì´ì§€</span>
            </a>
            <button onclick="logout()" class="dropdown-item logout">
                <span class="material-symbols-outlined">logout</span>
                <span>ë¡œê·¸ì•„ì›ƒ</span>
            </button>
        `;
    } else {
        dropdownContent.innerHTML = `
            <div class="dropdown-header">
                <p class="dropdown-subtitle">ë” ë§ì€ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë ¤ë©´</p>
                <p class="dropdown-title">ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤</p>
            </div>
            <a href="login.html" class="dropdown-item">
                <span class="material-symbols-outlined">login</span>
                <span>ë¡œê·¸ì¸</span>
            </a>
            <a href="logregist.html" class="dropdown-item">
                <span class="material-symbols-outlined">person_add</span>
                <span>íšŒì›ê°€ì…</span>
            </a>
        `;
    }
}

function logout() {
    localStorage.setItem('isLoggedIn', 'false');
    toggleLoginState();
}

function toggleDarkMode() {
    document.body.classList.toggle('dark');
    localStorage.setItem('darkMode', document.body.classList.contains('dark'));
}

if (localStorage.getItem('darkMode') === 'true' ||
    (!localStorage.getItem('darkMode') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
    document.body.classList.add('dark');
}

function toggleUserMenu() {
    document.getElementById('userDropdown').classList.toggle('show');
}

document.addEventListener('click', (e) => {
    const menu = document.querySelector('.user-menu');
    const dropdown = document.getElementById('userDropdown');
    if (menu && !menu.contains(e.target)) {
        dropdown.classList.remove('show');
    }
});

function setActiveCategoryByURL() {
    const navItems = document.querySelectorAll('.nav-splash-item');
    const currentPage = window.location.pathname.split('/').pop();
    navItems.forEach(item => {
        const href = item.getAttribute('href');
        if (href === currentPage) {
            item.classList.add('active');
        } else {
            item.classList.remove('active');
        }
    });
}

function updateSearchPlaceholder(select) {
    const searchInput = document.getElementById('searchInput');
    const placeholders = {
        title_body: 'ì œëª©+ë³¸ë¬¸ì—ì„œ ê´€ì‹¬ìˆëŠ” ë‰´ìŠ¤ë¥¼ ê²€ìƒ‰í•´ë³´ì„¸ìš”',
        title: 'ì œëª©ì—ì„œ ê´€ì‹¬ìˆëŠ” ë‰´ìŠ¤ë¥¼ ê²€ìƒ‰í•´ë³´ì„¸ìš”',
        body: 'ë³¸ë¬¸ì—ì„œ ê´€ì‹¬ìˆëŠ” ë‰´ìŠ¤ë¥¼ ê²€ìƒ‰í•´ë³´ì„¸ìš”',
        keyword: 'í‚¤ì›Œë“œë¡œ ê´€ì‹¬ìˆëŠ” ë‰´ìŠ¤ë¥¼ ê²€ìƒ‰í•´ë³´ì„¸ìš”'
    };
    searchInput.placeholder = placeholders[select.value];
}

function performSearch() {
    const term = document.getElementById('searchInput').value.trim();
    const scope = document.getElementById('searchScope').value;
    if (term) {
        location.href = `search.html?q=${encodeURIComponent(term)}&scope=${encodeURIComponent(scope)}`;
    }
}
    $(document).ready(function() {
    // 1. í˜ì´ì§€ ë¡œë“œ ì‹œ ì¦‰ì‹œ ì‹¤í–‰ í•¨ìˆ˜ ( ì¦‰ì‹œì‹¤í–‰ í•  ê²ƒ ìˆìœ¼ë©´ ì¶”ê°€ê°€ëŠ¥ )
    initApp();
});

function initApp() {
    // ë¡œê·¸ì¸ ì—¬ë¶€ í™•ì¸
    const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
    const savedName = localStorage.getItem('userName') || "íšŒì›";

    // 2. ì„œë²„ ì‘ë‹µ ì „ì´ë¼ë„ ë¡œì»¬ ë°ì´í„°ë¥¼ ì´ìš©í•´ UI ë¨¼ì € ë Œë”ë§
    renderUserMenu(isLoggedIn, savedName);

    if (isLoggedIn) {
        // 3. ì„œë²„ì—ì„œ ìµœì‹  ì •ë³´ ê°€ì ¸ì™€ ë™ê¸°í™”
        fetchUserInfo();
    }
}

function fetchUserInfo() {
    $.ajax({
        url: '/get-my-info',
        type: 'GET',
        success: function(response) {
            if (response.status === "success" && response.data) {
                const user = response.data;

                // ë¸Œë¼ìš°ì € ì €ì¥ì†Œ ê°±ì‹ 
                localStorage.setItem('userName', user.name);
                localStorage.setItem('isLoggedIn', 'true');

                // UI ì—…ë°ì´íŠ¸ (ë“œë¡­ë‹¤ìš´ & ì‚¬ì´ë“œë°”)
                renderUserMenu(true, user.name);
            }
        },
        error: function(xhr) {
            console.error("ì¸ì¦ ë¡œë“œ ì‹¤íŒ¨:", xhr.status);
            if(xhr.status === 401) {
                localStorage.setItem('isLoggedIn', 'false');
                renderUserMenu(false);
            }
        }
    });
}

// ë“œë¡­ë‹¤ìš´ ë¶€ë¶„
function renderUserMenu(isLoggedIn, userName = "íšŒì›") {

    const content = document.getElementById('dropdownContent');
    if (!content) return;

    if (isLoggedIn) {
        content.innerHTML = `
            <div class="dropdown-header">
                <p class="dropdown-subtitle">í™˜ì˜í•©ë‹ˆë‹¤!</p>
                      const userName = localStorage.getItem('userName') || 'íšŒì›';
                <p class="dropdown-title">${userName}ë‹˜</p>
            </div>
            <a href="mypage.html" class="dropdown-item">
                <span class="material-symbols-outlined">account_circle</span>
                <span>ë§ˆì´í˜ì´ì§€</span>
            </a>
            <button onclick="logout()" class="dropdown-item logout" style="width:100%; border:none; background:none; cursor:pointer; text-align:left; display:flex; align-items:center; gap:8px; padding: 12px 16px; color: #ef4444;">
                <span class="material-symbols-outlined">logout</span>
                <span>ë¡œê·¸ì•„ì›ƒ</span>
            </button>
        `;
    } else {
        content.innerHTML = `
            <div class="dropdown-header">
                <p class="dropdown-subtitle">ë” ë§ì€ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë ¤ë©´</p>
                <p class="dropdown-title" style="font-weight:bold; margin-top:4px;">ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤</p>
            </div>
            <a href="login.html" class="dropdown-item">
                <span class="material-symbols-outlined">login</span>
                <span>ë¡œê·¸ì¸</span>
            </a>
            <a href="logregist.html" class="dropdown-item">
                <span class="material-symbols-outlined">person_add</span>
                <span>íšŒì›ê°€ì…</span>
            </a>
        `;
    }
}
</script>

</body>
</html>
